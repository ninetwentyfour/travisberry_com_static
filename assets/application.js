(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,f){a(window).scrollTo(b,c,f)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1};c.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,f){"object"==typeof e&&(f=e,e=0);"function"==typeof f&&(f={onAfter:f});"max"==d&&(d=9E9);f=a.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&1<f.axis.length;f.queue&&(e/=2);f.offset=b(f.offset);f.over=b(f.over);return this._scrollable().each(function(){function k(a){o.animate(r,e,f.easing,a&&function(){a.call(this,d,f)})}var m=this,o=a(m),q=d,x,r={},C=o.is("html,body");switch(typeof q){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(q)){q=
b(q);break}q=a(q,this);case "object":if(q.is||q.style)x=(q=a(q)).offset()}a.each(f.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",e=d.toLowerCase(),g="scroll"+d,n=m[g],y=c.max(m,b);if(x){r[g]=x[e]+(C?0:n-o.offset()[e]);if(f.margin){r[g]=r[g]-(parseInt(q.css("margin"+d))||0);r[g]=r[g]-(parseInt(q.css("border"+d+"Width"))||0)}r[g]=r[g]+(f.offset[e]||0);f.over[e]&&(r[g]=r[g]+q[b=="x"?"width":"height"]()*f.over[e])}else{d=q[e];r[g]=d.slice&&d.slice(-1)=="%"?parseFloat(d)/100*y:d}/^\d+$/.test(r[g])&&
(r[g]=r[g]<=0?0:Math.min(r[g],y));if(!a&&f.queue){n!=r[g]&&k(f.onAfterFirst);delete r[g]}});k(f.onAfter)}).end()};c.max=function(b,c){var f="x"==c?"Width":"Height",k="scroll"+f;if(!a(b).is("html,body"))return b[k]-a(b)[f.toLowerCase()]();var f="client"+f,m=b.ownerDocument.documentElement,o=b.ownerDocument.body;return Math.max(m[k],o[k])-Math.min(m[f],o[f])}})(jQuery);
jQuery.fn.topLink=function(a){a=jQuery.extend({min:1,fadeSpeed:200},a);return this.each(function(){var b=$(this);b.hide();$(window).scroll(function(){$(window).scrollTop()>=a.min?b.fadeIn(a.fadeSpeed):b.fadeOut(a.fadeSpeed)})})};$(document).ready(function(){$("#top-link").topLink({min:400,fadeSpeed:500});$("#top-link").click(function(a){a.preventDefault();$.scrollTo(0,300)})});
(function(a){function b(b,d){var e=a("<form>").attr({id:"searchFrom","class":"filterform",action:"#"}),f=a("<input>").attr({id:"search","class":"filterinput",type:"text",placeholder:"Search..."});a(e).append(f).appendTo(b);a(f).change(function(){var b=a(this).val();b?(a(d).find("h3:not(:Contains("+b+"))").parent().slideUp(),a(d).find("h3:Contains("+b+")").parent().slideDown()):a(d).find("article").slideDown();return!1}).keyup(function(){a(this).change()})}jQuery.expr[":"].Contains=function(a,b,e){return 0<=
(a.textContent||a.innerText||"").toUpperCase().indexOf(e[3].toUpperCase())};a(function(){b(a("#search"),a("#list"))})})(jQuery);function trace(a){window.console?console.log(a):"undefined"!=typeof jsTrace&&jsTrace.send(a)}function onYouTubePlayerAPIReady(){VMM.ExternalAPI.youtube.onAPIReady()}
(function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var k in c)f[k]="function"==typeof c[k]&&"function"==typeof e[k]&&b.test(c[k])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(k,c[k]):c[k];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,
d}})();var global=function(){return this||(0,eval)("this")}();
if("undefined"==typeof VMM){var VMM=Class.extend({});VMM.master_config={init:function(){return this},youtube:{active:!1,array:[],api_loaded:!1}}.init();VMM.master_config={init:function(){return this},youtube:{active:!1,array:[],api_loaded:!1,que:[]}}.init();VMM.createElement=function(a,b,c,d,e){var f="";return null!=a&&""!=a&&(f+="<"+a,null!=c&&""!=c&&(f+=" class='"+c+"'"),null!=d&&""!=d&&(f+=" "+d),null!=e&&""!=e&&(f+=" "+e),f+=">",null!=b&&""!=b&&(f+=b),f=f+"</"+a+">"),f};VMM.createMediaElement=
function(a,b,c){var d="";return d+="<div class='media'>",null!=a&&""!=a&&(valid=!0,d+="<img src='"+a+"'>",null!=c&&""!=c&&(d+=VMM.createElement("div",c,"credit")),null!=b&&""!=b&&(d+=VMM.createElement("div",b,"caption"))),d+="</div>",d};VMM.attachElement=function(a,b){"undefined"!=typeof jQuery&&$(a).html(b)};VMM.appendElement=function(a,b){"undefined"!=typeof jQuery&&$(a).append(b)};VMM.getHTML=function(a){var b;if("undefined"!=typeof jQuery)return b=$(a).html(),b};VMM.getElement=function(a,b){var c;
if("undefined"!=typeof jQuery)return b?c=$(a).parent().get(0):c=$(a).get(0),c};VMM.bindEvent=function(a,b,c,d){var e="click",f={};null!=c&&""!=c&&(e=c);null!=f&&""!=f&&(f=d);"undefined"!=typeof jQuery&&$(a).bind(e,f,b)};VMM.unbindEvent=function(a,b,c){var d="click";null!=c&&""!=c&&(d=c);"undefined"!=typeof jQuery&&$(a).unbind(d,b)};VMM.fireEvent=function(a,b,c){var d="click",e=[];null!=b&&""!=b&&(d=b);null!=c&&""!=c&&(e=c);"undefined"!=typeof jQuery&&$(a).trigger(d,e)};VMM.getJSON=function(a,b){"undefined"!=
typeof jQuery&&$.getJSON(a,b)};VMM.appendAndGetElement=function(a,b,c,d){var e,f="",k="";return null!=c&&""!=c&&(f=c),null!=d&&""!=d&&(k=d),"undefined"!=typeof jQuery&&(e=$(b),e.addClass(f),e.html(k),$(a).append(e)),e};VMM.Element={init:function(){return this},hide:function(a,b){null!=b&&""!=b?"undefined"!=typeof jQuery&&$(a).hide(b):"undefined"!=typeof jQuery&&$(a).hide()},remove:function(a){"undefined"!=typeof jQuery&&$(a).remove()},detach:function(a){"undefined"!=typeof jQuery&&$(a).detach()},
append:function(a,b){"undefined"!=typeof jQuery&&$(a).append(b)},show:function(a,b){null!=b&&""!=b?"undefined"!=typeof jQuery&&$(a).show(b):"undefined"!=typeof jQuery&&$(a).show()},load:function(a,b,c){var d={elem:a};null!=d&&""!=d&&(d=c);"undefined"!=typeof jQuery&&$(a).load(d,b)},addClass:function(a,b){"undefined"!=typeof jQuery&&$(a).addClass(b)},removeClass:function(a,b){"undefined"!=typeof jQuery&&$(a).removeClass(b)},attr:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&$(a).attr(b,
c);else if("undefined"!=typeof jQuery)return $(a).attr(b)},prop:function(a,b,c){"undefined"==typeof jQuery||!/[1-9]\.[3-9].[1-9]/.test($.fn.jquery)?VMM.Element.attribute(a,b,c):$(a).prop(b,c)},attribute:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&$(a).attr(b,c);else if("undefined"!=typeof jQuery)return $(a).attr(b)},visible:function(a,b){if(null!=b)"undefined"!=typeof jQuery&&(b?$(a).show(0):$(a).hide(0));else if("undefined"!=typeof jQuery)return $(a).is(":visible")?!0:!1},css:function(a,
b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&$(a).css(b,c);else if("undefined"!=typeof jQuery)return $(a).css(b)},cssmultiple:function(a,b){if("undefined"!=typeof jQuery)return $(a).css(b)},offset:function(a){var b;return"undefined"!=typeof jQuery&&(b=$(a).offset()),b},position:function(a){var b;return"undefined"!=typeof jQuery&&(b=$(a).position()),b},width:function(a,b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&$(a).width(b);else if("undefined"!=typeof jQuery)return $(a).width()},height:function(a,
b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&$(a).height(b);else if("undefined"!=typeof jQuery)return $(a).height()},toggleClass:function(a,b){"undefined"!=typeof jQuery&&$(a).toggleClass(b)},each:function(a,b){"undefined"!=typeof jQuery&&$(a).each(b)},html:function(a,b){var c;if("undefined"!=typeof jQuery)return c=$(a).html(),c;if(null!=b&&""!=b)"undefined"!=typeof jQuery&&$(a).html(b);else if("undefined"!=typeof jQuery)return c=$(a).html(),c},find:function(a,b){if("undefined"!=typeof jQuery)return $(a).find(b)},
stop:function(a){"undefined"!=typeof jQuery&&$(a).stop()},animate:function(a,b,c,d,e){var f="easein",k=1E3,m={};null!=b&&(1>b?k=1:k=Math.round(b));null!=c&&""!=c&&(f=c);null!=d?m=d:m={opacity:0};"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device?(b=Math.round(10*(k/1500))/10+"s",VMM.Element.css(a,"-webkit-transition","all "+b+" ease"),VMM.Element.css(a,"-moz-transition","all "+b+" ease"),VMM.Element.css(a,"-o-transition","all "+b+" ease"),VMM.Element.css(a,"-ms-transition","all "+b+" ease"),
VMM.Element.css(a,"transition","all "+b+" ease"),VMM.Element.cssmultiple(a,m)):"undefined"!=typeof jQuery&&(null!=e&&""!=e?$(a).animate(m,{queue:!1,duration:k,easing:f,complete:e}):$(a).animate(m,{queue:!1,duration:k,easing:f}))}}.init();VMM.TouchSlider={createPanel:function(a,b,c,d,e,f){VMM.TouchSlider.vertical=!1;VMM.TouchSlider.vertical=e;VMM.TouchSlider.width=c;VMM.TouchSlider.height=f;VMM.TouchSlider.makeTouchable(a,b)},removePanel:function(a){VMM.unbindEvent(a,VMM.TouchSlider.onTouchStart,"touchstart");
VMM.unbindEvent(a,VMM.TouchSlider.onTouchMove,"touchmove");VMM.unbindEvent(a,VMM.TouchSlider.onTouchEnd,"touchend")},makeTouchable:function(a,b){VMM.bindEvent(a,VMM.TouchSlider.onTouchStart,"touchstart",{element:b});VMM.bindEvent(a,VMM.TouchSlider.onTouchMove,"touchmove",{element:b});VMM.bindEvent(a,VMM.TouchSlider.onTouchEnd,"touchend",{element:b})},onTouchStart:function(a){return VMM.TouchSlider.touchStart(a.data.element,a),a.preventDefault(),a.stopPropagation(),!0},onTouchEnd:function(a){return a.preventDefault(),
a.stopPropagation(),VMM.TouchSlider.sliding?(VMM.TouchSlider.sliding=!1,VMM.TouchSlider.touchEnd(a.data.element,a),!1):!0},onTouchMove:function(a){return VMM.TouchSlider.touchMove(a.data.element,a),a.preventDefault(),a.stopPropagation(),!1},getLeft:function(a){return parseInt(VMM.Element.css(a,"left").substring(0,VMM.Element.css(a,"left").length-2),10)},getTop:function(a){return parseInt(VMM.Element.css(a,"top").substring(0,VMM.Element.css(a,"top").length-2),10)},touchStart:function(a,b){VMM.Element.css(a,
"-webkit-transition-duration","0");VMM.TouchSlider.startX=b.originalEvent.touches[0].screenX;VMM.TouchSlider.startY=b.originalEvent.touches[0].screenY;VMM.TouchSlider.startLeft=VMM.TouchSlider.getLeft(a);VMM.TouchSlider.startTop=VMM.TouchSlider.getTop(a);VMM.TouchSlider.touchStartTime=(new Date).getTime()},touchEnd:function(a,b){0<VMM.TouchSlider.getLeft(a)?(VMM.TouchSlider.vertical?VMM.Element.animate(a,1E3,"",{top:0}):VMM.Element.animate(a,1E3,"",{left:0}),VMM.TouchSlider.startX=null,VMM.TouchSlider.startY=
null,VMM.fireEvent(a,"TOUCHUPDATE",[0])):VMM.TouchSlider.slideMomentum(a,b)},slideMomentum:function(a){var b=10*((new Date).getTime()-VMM.TouchSlider.touchStartTime),c=b,d=VMM.TouchSlider.getLeft(a),e=VMM.TouchSlider.getTop(a),f=6E3*(Math.abs(VMM.TouchSlider.startLeft)-Math.abs(d)),k=6E3*(Math.abs(VMM.TouchSlider.startTop)-Math.abs(e)),b=Math.round(f/b);slideAdjustY=Math.round(k/b);b+=d;c={top:Math.min(0,slideAdjustY+e),left:Math.min(0,b),time:c};VMM.fireEvent(a,"TOUCHUPDATE",[c]);VMM.TouchSlider.startX=
null;VMM.TouchSlider.startY=null},doSlide:function(a,b,c){VMM.Element.css(a,"-webkit-transition-property","left");VMM.Element.css(a,"-webkit-transition-duration",c);VMM.Element.css(a,"left",b)},touchMove:function(a,b){!!VMM.TouchSlider.sliding;VMM.TouchSlider.sliding=!0;VMM.TouchSlider.vertical?VMM.TouchSlider.startY>b.originalEvent.touches[0].screenY?(VMM.Element.css(a,"top",-(VMM.TouchSlider.startY-b.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),VMM.TouchSlider.slidingTop=!0):(VMM.Element.css(a,
"top",-(VMM.TouchSlider.startY-b.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),VMM.TouchSlider.slidingTop=!1):VMM.TouchSlider.startX>b.originalEvent.touches[0].screenX?(VMM.Element.css(a,"left",-(VMM.TouchSlider.startX-b.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=!0):(VMM.Element.css(a,"left",-(VMM.TouchSlider.startX-b.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=!1)}};VMM.hideUrlBar=function(){var a=
window,b=a.document;if(!location.hash||!a.addEventListener){window.scrollTo(0,1);var c=1,d=setInterval(function(){b.body&&(clearInterval(d),c="scrollTop"in b.body?b.body.scrollTop:1,a.scrollTo(0,1===c?0:1))},15);a.addEventListener("load",function(){setTimeout(function(){a.scrollTo(0,1===c?0:1)},0)},!1)}};VMM.DragSlider={createPanel:function(a,b,c,d,e){VMM.DragSlider.width=c;VMM.DragSlider.makeDraggable(a,b);VMM.DragSlider.drag_elem=a;VMM.DragSlider.sticky=e},makeDraggable:function(a,b){VMM.bindEvent(a,
VMM.DragSlider.onDragStart,"mousedown",{element:b,delement:a});VMM.bindEvent(a,VMM.DragSlider.onDragEnd,"mouseup",{element:b,delement:a});VMM.bindEvent(a,VMM.DragSlider.onDragLeave,"mouseleave",{element:b,delement:a})},cancelSlide:function(){return VMM.unbindEvent(VMM.DragSlider.drag_elem,VMM.DragSlider.onDragMove,"mousemove"),!0},onDragLeave:function(a){return VMM.unbindEvent(a.data.delement,VMM.DragSlider.onDragMove,"mousemove"),a.preventDefault(),a.stopPropagation(),!0},onDragStart:function(a){return VMM.DragSlider.dragStart(a.data.element,
a.data.delement,a),a.preventDefault(),a.stopPropagation(),!0},onDragEnd:function(a){return a.preventDefault(),a.stopPropagation(),VMM.DragSlider.sliding?(VMM.DragSlider.sliding=!1,VMM.DragSlider.dragEnd(a.data.element,a.data.delement,a),!1):!0},onDragMove:function(a){return VMM.DragSlider.dragMove(a.data.element,a),a.preventDefault(),a.stopPropagation(),!1},dragStart:function(a,b,c){VMM.DragSlider.startX=c.pageX;VMM.DragSlider.startLeft=VMM.DragSlider.getLeft(a);VMM.DragSlider.dragStartTime=(new Date).getTime();
VMM.DragSlider.dragWidth=VMM.Element.width(b);Math.round(VMM.DragSlider.startX-c.pageX-VMM.DragSlider.startLeft);VMM.Element.stop(a);VMM.bindEvent(b,VMM.DragSlider.onDragMove,"mousemove",{element:a})},dragEnd:function(a,b,c){VMM.unbindEvent(b,VMM.DragSlider.onDragMove,"mousemove");0<VMM.DragSlider.getLeft(a)||VMM.DragSlider.dragMomentum(a,c)},dragMove:function(a,b){!!VMM.DragSlider.sliding;VMM.DragSlider.sliding=!0;VMM.DragSlider.startX>b.pageX?(VMM.Element.css(a,"left",-(VMM.DragSlider.startX-b.pageX-
VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!0):(VMM.Element.css(a,"left",-(VMM.DragSlider.startX-b.pageX-VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!1)},dragMomentum:function(a){var b=10*((new Date).getTime()-VMM.DragSlider.dragStartTime),c=b,d=VMM.DragSlider.getLeft(a),e=6E3*(Math.abs(VMM.DragSlider.startLeft)-Math.abs(d)),b=Math.round(e/b),b={left:Math.min(d+b),time:c};VMM.fireEvent(a,"DRAGUPDATE",[b]);0<b.time&&VMM.Element.animate(a,b.time,"easeOutExpo",{left:b.left})},getLeft:function(a){return parseInt(VMM.Element.css(a,
"left").substring(0,VMM.Element.css(a,"left").length-2),10)}};VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.device=this.searchDevice(navigator.userAgent)},searchDevice:function(a){return a.match(/Android/i)||a.match(/iPhone|iPod/i)?"mobile":a.match(/iPad/i)?"tablet":a.match(/BlackBerry/i)||
a.match(/IEMobile/i)?"other mobile":"desktop"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);return-1==b?void 0:parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},
{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,
subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},
{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};VMM.Browser.init();VMM.MediaElement={init:function(){return this},thumbnail:function(a,b,c){_h=_w=32;null!=b&&""!=b&&(_w=b);null!=c&&""!=c&&(_h=c);if(null!=a.media&&""!=a.media)return _valid=!0,b="",c={},c=VMM.MediaType(a.media),"image"==c.type?(b="<div class='thumbnail'><img src='"+c.id+"' width='"+_w+"px' height='"+_h+"px'></div>",b):"flickr"==c.type?(b="<div class='thumbnail'><img id='flickr_"+
c.id+"_thumb' width='"+_w+"px' height='"+_h+"px'></div>",b):"youtube"==c.type?(b="<div class='thumbnail youtube'></div>",b):"vimeo"==c.type?(b="<div class='thumbnail vimeo'></div>",b):"twitter"==c.type?(b="<div class='thumbnail twitter'></div>",b):"twitter-ready"==c.type?(b="<div class='thumbnail twitter'></div>",b):"soundcloud"==c.type?(b="<div class='thumbnail soundcloud'></div>",b):"google-map"==c.type?(b="<div class='thumbnail map'></div>",b):"unknown"==c.type?(b="",b):"website"==c.type?(b="<div class='thumbnail website'></div>",
b):(b="<div class='thumbnail'></div>",b)},create:function(a,b,c,d,e){_return=c;_w=500;_h=400;$mediacontainer=a;null!=d&&""!=d&&(_w=d);null!=e&&""!=e&&(_h=e);if(null!=b.media&&""!=b.media){var d=c=a="",e={},f=!1;null!=b.credit&&""!=b.credit&&(d="<div class='credit'>"+b.credit+"</div>");null!=b.caption&&""!=b.caption&&(c="<div class='caption'>"+b.caption+"</div>");e=VMM.MediaType(b.media);"image"==e.type?a="<img src='"+e.id+"'>":"flickr"==e.type?(b="flickr_"+e.id,a="<img id='"+b+"_large'>",VMM.ExternalAPI.flickr.getPhoto(e.id,
"#"+b)):"youtube"==e.type?(a="<div class='media-frame video youtube' id='youtube_"+e.id+"'>Loading YouTube video...</div>",VMM.ExternalAPI.youtube.init(e.id)):"vimeo"==e.type?a="<iframe class='media-frame video vimeo' frameborder='0' width='100%' height='100%' src='http://player.vimeo.com/video/"+e.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'></iframe>":"twitter"==e.type?(a="<div class='twitter' id='"+e.id+"'>Loading Tweet</div>",trace("TWITTER"),VMM.ExternalAPI.twitter.prettyHTML(e.id),
f=!0):"twitter-ready"==e.type?a=e.id:"soundcloud"==e.type?(b="soundcloud_"+VMM.Util.unique_ID(5),a="<div class='media-frame soundcloud' id='"+b+"'>Loading Sound</div>",VMM.ExternalAPI.soundcloud.getSound(e.id,b)):"google-map"==e.type?a="<iframe class='media-frame map' frameborder='0' width='100%' height='100%' scrolling='no' marginheight='0' marginwidth='0' src='"+e.id+"&amp;output=embed'></iframe>":"unknown"==e.type?(trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML"),a=VMM.Util.properQuotes(e.id)):
"website"==e.type?a="<iframe class='media-frame' frameborder='0' width='100%' height='100%' scrolling='yes' marginheight='0' marginwidth='0' src='"+e.id+"'></iframe>":(trace("NO KNOWN MEDIA TYPE FOUND"),trace(e.type));a="<div class='media-container' >"+a+d+c+"</div>";if(_return)return f?"<div class='media text-media'><div class='media-wrapper'>"+a+"</div></div>":"<div class='media'><div class='media-wrapper'>"+a+"</div></div>";VMM.appendElement($mediacontainer,a);VMM.appendElement($mediacontainer,
d);VMM.appendElement($mediacontainer,c)}}}.init();VMM.MediaType=function(a){var b=!1,c={};return a.match("div class='twitter'")?(c.type="twitter-ready",c.id=a,b=!0):a.match("(www.)?youtube|youtu.be")?(a.match("embed")?youtube_id=a.split(/embed\//)[1].split('"')[0]:youtube_id=a.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],c.type="youtube",c.id=youtube_id,b=!0):a.match("(player.)?vimeo.com")?(vimeo_id=a.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],c.type="vimeo",c.id=vimeo_id,b=!0):a.match("(player.)?soundcloud.com")?
(c.type="soundcloud",c.id=a,b=!0):a.match("(www.)?twitter.com")?(trace("TWITTER MATCH"),a.match("status/")?twitter_id=a.split("status/")[1]:a.match("statuses/")?twitter_id=a.split("statuses/")[1]:twitter_id="",c.type="twitter",c.id=twitter_id,b=!0):a.match("maps.google.com")?(c.type="google-map",c.id=a.split(/src=['|"][^'|"]*?['|"]/gi),trace("google map "+c.id),b=!0):a.match("flickr.com/photos")?(c.type="flickr",c.id=a.split("photos/")[1].split("/")[1],trace("FLICKR "+c.id),b=!0):a.match(/jpg|jpeg|png|gif/i)?
(c.type="image",c.id=a,b=!0):0==a.indexOf("http://")?(c.type="website",c.id=a,b=!0):(trace("unknown media"),c.type="unknown",c.id=a,b=!0),b?c:(trace("No valid media id detected"),trace(a),!1)};VMM.Keys={flickr:"6d6f59d8d30d79f4f402a7644d5073e3"};VMM.ExternalAPI={twitter:{tweetArray:[],getHTML:function(a){VMM.getJSON("https://api.twitter.com/1/statuses/oembed.json?id="+a+"&callback=?",function(b){VMM.ExternalAPI.twitter.onJSONLoaded(b,a)})},onJSONLoaded:function(a,b){VMM.attachElement("#"+b,VMM.ExternalAPI.twitter.linkify(a.html))},
linkify:function(a){return a.replace(/[@]+[A-Za-z0-9-_]+/g,function(a){var c=a.replace("@","");return a.link("http://twitter.com/"+c)})},parseTwitterDate:function(a){return new Date(Date.parse(a))},prettyParseTwitterDate:function(a){a=new Date(Date.parse(a));return VMM.Util.date.prettyDate(a,!0)},getTweets:function(a){for(var b=[],c=a.length,d=0;d<a.length;d++){var e="";a[d].tweet.match("status/")?e=a[d].tweet.split("status/")[1]:a[d].tweet.match("statuses/")?e=a[d].tweet.split("statuses/")[1]:e=
"";VMM.getJSON("https://api.twitter.com/1/statuses/show.json?id="+e+"&include_entities=true&callback=?",function(a){var d={},e="<div class='twitter'><blockquote><p>",o=VMM.Util.linkify(a.text),o=o.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),o=o.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),e=e+o+"</p>"+("\u2014 "+a.user.name+" (<a href='https://twitter.com/"+a.user.screen_name+"'>@"+a.user.screen_name+"</a>) <a href='https://twitter.com/"+a.user.screen_name+
"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.created_at)+" </a></blockquote></div>");d.content=e;d.raw=a;b.push(d);b.length==c&&VMM.fireEvent(global,"TWEETSLOADED",{tweetdata:b})})}},getTweetSearch:function(a,b){var c=40;null!=b&&""!=b&&(c=b);var d=[];VMM.getJSON("http://search.twitter.com/search.json?q="+a+"&rpp="+c+"&include_entities=true&result_type=mixed",function(a){for(var b=0;b<a.results.length;b++){var c={},m="<div class='twitter'><blockquote><p>",o=VMM.Util.linkify(a.results[b].text),
o=o.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),o=o.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),m=m+o,m=m+"</p>",m=m+("\u2014 "+a.results[b].from_user_name+" (<a href='https://twitter.com/"+a.results[b].from_user+"'>@"+a.results[b].from_user+"</a>) <a href='https://twitter.com/"+a.results[b].from_user+"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.results[b].created_at)+" </a></blockquote></div>");c.content=m;c.raw=a.results[b];
d.push(c)}VMM.fireEvent(global,"TWEETSLOADED",{tweetdata:d})})},prettyHTML:function(a){VMM.getJSON("https://api.twitter.com/1/statuses/show.json?id="+a+"&include_entities=true&callback=?",function(b){VMM.ExternalAPI.twitter.formatJSON(b,a)})},formatJSON:function(a,b){var c="<blockquote><p>",d=VMM.Util.linkify(a.text),d=d.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),d=d.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),c=c+d+"</p></blockquote>"+(" <a href='https://twitter.com/"+
a.user.screen_name+"/status/"+a.id+"' alt='link to original tweet' title='link to original tweet'><span class='created-at'></span> </a>"),c=c+"<div class='vcard author'>"+("<a class='screen-name url' href='https://twitter.com/"+a.user.screen_name+"' data-screen-name='"+a.user.screen_name+"'>"),c=c+("<span class='avatar'><img src=' "+a.user.profile_image_url+"'  alt=''></span>"),c=c+("<span class='fn'>"+a.user.name+"</span>"),c=c+("<span class='nickname'>@"+a.user.screen_name+"</span>");VMM.attachElement("#"+
b,c+"</a></div>")}},maps:{},flickr:{getPhoto:function(a,b){VMM.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+VMM.Keys.flickr+"&photo_id="+a+"&format=json&nojsoncallback=1",function(a){var d=b+"_thumb",e=a.sizes.size[0].source;VMM.Element.attr(b+"_large","src",a.sizes.size[a.sizes.size.length-1].source);VMM.Element.attr(d,"src",e)})}},soundcloud:{getSound:function(a,b){VMM.getJSON("http://soundcloud.com/oembed?iframe=true&url="+a+"",function(a){VMM.attachElement("#"+
b,a.html)})}},youtube:{init:function(a){if(VMM.master_config.youtube.active)VMM.master_config.youtube.createPlayer(a);else if(VMM.master_config.youtube.que.push(a),!VMM.master_config.youtube.api_loaded){a=document.createElement("script");a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);VMM.master_config.youtube.api_loaded=!0}},onAPIReady:function(){VMM.master_config.youtube.active=!0;for(var a=0;a<VMM.master_config.youtube.que.length;a++)VMM.ExternalAPI.youtube.createPlayer(VMM.master_config.youtube.que[a])},
createPlayer:function(a){var b={active:!1,player:{},name:"youtube_"+a,playing:!1};b.player["youtube_"+a]=new YT.Player("youtube_"+a,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",rel:0,origin:"http://dev.verite.co"},videoId:a,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}});VMM.master_config.youtube.array.push(b)},stopPlayers:function(){for(var a=0;a<VMM.master_config.youtube.array.length;a++)VMM.master_config.youtube.array[a].playing&&
VMM.master_config.youtube.array[a].player[VMM.master_config.youtube.array[a].name].stopVideo()},onStateChange:function(a){for(var b=0;b<VMM.master_config.youtube.array.length;b++)VMM.master_config.youtube.array[b].player[VMM.master_config.youtube.array[b].name]==a.target&&a.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[b].playing=!0)},onPlayerReady:function(){}}};VMM.Media=function(a){var b={},c="",d="",e="";this.init=function(a){"undefined"!=typeof a?this.setData(a):trace("WAITING ON DATA")};
this.setData=function(f){"undefined"!=typeof f?(b=f,c=VMM.appendAndGetElement(a,"<div>","media"),d=VMM.appendAndGetElement(c,"<div>","container"),e=VMM.appendAndGetElement(d,"<div>","media-container"),null!=b.media&&""!=b.media&&(f={},f=VMM.MediaType(b.media),"image"==f.type?VMM.appendElement(e,"<img src='"+f.id+"'>"):"youtube"==f.type?VMM.appendElement(e,"<iframe frameborder='0' src='http://www.youtube.com/embed/"+f.id+"?&rel=0&theme=light&showinfo=0&hd=1&autohide=0&color=white' allowfullscreen>"):
"vimeo"==f.type&&VMM.appendElement(e,"<iframe frameborder='0' src='http://player.vimeo.com/video/"+f.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'>"),null!=b.credit&&""!=b.credit&&VMM.appendElement(d,VMM.createElement("div",b.credit,"credit")),null!=b.caption&&""!=b.caption&&VMM.appendElement(d,VMM.createElement("div",b.caption,"caption")))):trace("NO DATA")}};VMM.Media.prototype.height=function(a){if(null==a||""==a)return config.height;config.height=a;reSize()};VMM.Media.prototype.width=
function(a){if(null==a||""==a)return config.width;config.width=a;reSize()};VMM.Media.prototype.getData=function(){return data};VMM.Media.prototype.setConfig=function(a){"undefined"!=typeof a?config=a:trace("NO CONFIG DATA")};VMM.Media.prototype.getConfig=function(){return config};VMM.Media.prototype.setSize=function(a,b){null!=a&&(config.width=a);null!=b&&(config.height=b);_active&&reSize()};VMM.Media.prototype.active=function(){return _active}}
Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil(((this-a)/864E5+a.getDay()+1)/7)};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((this-a)/864E5)};
var is={Null:function(a){return null===a},Undefined:function(a){return void 0===a},nt:function(a){return null===a||void 0===a},Function:function(a){return"function"==typeof a?null!==a.constructor.toString().match(/Function/):!1},String:function(a){return"string"==typeof a?!0:"object"==typeof a?null!==a.constructor.toString().match(/string/i):!1},Array:function(a){return"object"==typeof a?null!==a.constructor.toString().match(/array/i)||void 0!==a.length:!1},Boolean:function(a){return"boolean"==typeof a?
!0:"object"==typeof a?null!==a.constructor.toString().match(/boolean/i):!1},Date:function(a){return"date"==typeof a?!0:"object"==typeof a?null!==a.constructor.toString().match(/date/i):!1},HTML:function(a){return"object"==typeof a?null!==a.constructor.toString().match(/html/i):!1},Number:function(a){return"number"==typeof a?!0:"object"==typeof a?null!==a.constructor.toString().match(/Number/):!1},Object:function(a){return"object"==typeof a?null!==a.constructor.toString().match(/object/i):!1},RegExp:function(a){return"function"==
typeof a?null!==a.constructor.toString().match(/regexp/i):!1}},type={of:function(a){for(var b in is)if(is[b](a))return b.toLowerCase()}};
"undefined"!=typeof jQuery&&(jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/2)?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInQuad:function(a,b,c,d,
e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c}}));
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Sequence&&(VMM.Sequence=Class.extend({initialize:function(a,b){trace("sequence init");this.decrement=this.increment=1;this.wrap=!1;this.length=null==a?0:a;this.index=null==b?0==a?-1:0:b>=a?a-1:b;this.synced=[]},setLength:function(a){this.length=a;this.setIndex(this.index)},getLength:function(){return this.length},setIndex:function(a){if(0>=this.length)this.index=-1;else{0>a?a=this.wrap?this.length-a%this.length:0:a>=this.length&&(a=this.wrap?a%this.length:
this.length-1);var b=this.index;this.index=a;if(b!=this.index)for(a=0;a<this.synced.length;a++)b=this.synced[a],b.getIndex()!=this.index&&b.setIndex(this.index)}},getIndex:function(){return this.index},next:function(){this.setIndex(this.index+this.increment)},prev:function(){this.setIndex(this.index-this.decrement)},sync:function(a,b){return a instanceof NYTMM.Sequence&&a!=this?(this.synced.push(a),b&&a.sync(this),!0):!1},unsync:function(a,b){for(var c=0;c<this.synced.length;c++)if(this.synced[c]==
a)return this.synced.splice(c,1),b&&a.unsync(this),!0;return!1}}));
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Slider&&(VMM.Slider=function(a,b,c,d){var e,f,k,m,o,q,x,r;function C(a,b){var c=!0,d=!1;null!=a&&(c=a);null!=b&&(d=b);y=h.width;h.nav_height=VMM.Element.height(e);h.content_width=y-2*h.content_padding;VMM.Element.width(v,g.length*h.content_width);d&&(d=VMM.Element.position(g[n]),VMM.Element.css(i,"left",d.left));VMM.Element.css(".slider-item","width",h.content_width);VMM.Element.height(".slider-item",h.height);VMM.Element.css(".slider-item .layout-text-media .media .media-container img",
"max-height",h.height-50);VMM.Element.css(".slider-item .layout-media .media .media-container img","max-height",h.height-150);VMM.Element.css(".slider-item .media .media-container .soundcloud","max-height",168);var d=Math.round(h.height)-160,l=Math.round(16*(d/9)),o=60*(h.content_width/100),q=Math.round(9*(o/16))+25;VMM.Element.height(".slider-item .media .media-container .media-frame",q);VMM.Element.width(".slider-item .media .media-container .media-frame",o);VMM.Element.height(".slider-item .layout-media .media .media-container .media-frame",
d);VMM.Element.width(".slider-item .layout-media .media .media-container .media-frame",l);VMM.Element.height(".slider-item .layout-media .media .media-container .soundcloud",h.height-150);VMM.Element.width(".slider-item .layout-media .media .media-container .soundcloud",h.content_width);VMM.Element.width(".slider-item .layout-text-media .media .media-container .soundcloud",o);VMM.Element.height(".slider-item .media .media-container .map",d);VMM.Element.css(".slider-item .layout-text-media .media .media-container .media-frame",
"max-width",h.content_width);for(l=d=0;l<g.length;l++)d=l*(h.width+h.spacing),VMM.Element.css(g[l],"left",d);VMM.Element.css(f,"left",y-h.nav_width);VMM.Element.height(k,h.height);VMM.Element.height(f,h.height);VMM.Element.css(m,"top",h.height/2-h.nav_height/2);VMM.Element.css(e,"top",h.height/2-h.nav_height/2);VMM.Element.height(j,h.height);VMM.Element.width(j,y);c&&p(n,"linear",1);0==n&&VMM.Element.visible(k,!1)}function J(){n==g.length-1?VMM.Element.animate(i,h.duration,h.ease,{left:-VMM.Element.position(g[n]).left}):
(p(n+1),VMM.fireEvent(s,"UPDATE"))}function K(){0==n?p(n):(p(n-1),VMM.fireEvent(s,"UPDATE"))}function M(a,b){if(0==u.length)for(var c=0;c<g.length;c++){var d=VMM.Element.position(g[c]);u.push(d.left)}"number"==typeof b.left?(c=b.left,c<-VMM.Element.position(g[n]).left-h.width/3?J():c>-VMM.Element.position(g[n]).left+h.width/3?K():VMM.Element.animate(i,h.duration,h.ease,{left:-VMM.Element.position(g[n]).left})):VMM.Element.animate(i,h.duration,h.ease,{left:-VMM.Element.position(g[n]).left});"number"==
typeof b.top&&VMM.Element.animate(i,h.duration,h.ease,{top:-b.top})}var z=[],g=[],n=0,y=960,u=[],h={interval:10,something:0,width:720,height:400,content_width:720,content_height:400,content_padding:130,ease:"easeInOutExpo",duration:1E3,nav_width:100,nav_height:200,timeline:!1,spacing:15};null!=b&&""!=b&&(h.width=b);null!=c&&""!=c&&(h.height=c);null!=d&&""!=d&&(h.timeline=d);var l=!1,w="",j="",i="",v="";r=x=q=o=m=k=f=e=void 0;f;k;o;q;x;r;this.ver="0.1";var s=a;this.init=function(a){"undefined"!=typeof a?
this.setData(a):trace("WAITING ON DATA")};this.width=function(a){if(null==a||""==a)return h.width;h.width=a;C()};this.height=function(a){if(null==a||""==a)return h.height;h.height=a;C()};this.setData=function(a){if("undefined"!=typeof a){z=a;VMM.attachElement(s,"");w=VMM.getElement("div.slider");j=VMM.appendAndGetElement(w,"<div>","slider-container-mask");i=VMM.appendAndGetElement(j,"<div>","slider-container");v=VMM.appendAndGetElement(i,"<div>","slider-item-container");f=VMM.appendAndGetElement(w,
"<div>","nav-next");k=VMM.appendAndGetElement(w,"<div>","nav-previous");m=VMM.appendAndGetElement(f,"<div>","nav-container","<div class='icon'>&nbsp;</div>");e=VMM.appendAndGetElement(k,"<div>","nav-container","<div class='icon'>&nbsp;</div>");h.timeline&&(o=VMM.appendAndGetElement(m,"<div>","date","1957"),q=VMM.appendAndGetElement(e,"<div>","date","1957"));x=VMM.appendAndGetElement(m,"<div>","title","Title Goes Here");r=VMM.appendAndGetElement(e,"<div>","title","Title Goes Here");VMM.bindEvent(".nav-next",
J);VMM.bindEvent(".nav-previous",K);a=z;VMM.attachElement(v,"");for(var b=0;b<a.length;b++){var c="",c=VMM.createElement("div",a[b].content,"content"),c=VMM.appendAndGetElement(v,"<div>","slider-item",c);g.push(c)}a=3E3;("tablet"==VMM.Browser.device||"mobile"==VMM.Browser.device)&&(h.duration=500,a=1E3,VMM.TouchSlider.createPanel(i,i,VMM.Element.width(g[0]),h.spacing,!0),VMM.bindEvent(i,M,"TOUCHUPDATE"));C(!1,!0);VMM.Element.visible(k,!1);p(0,"easeOutExpo",a,!0,!0);l=!0}else trace("NO DATA")};this.getData=
function(){return z};this.setConfig=function(a){"undefined"!=typeof a?h=a:trace("NO CONFIG DATA")};this.getConfig=function(){return h};this.setSize=function(a,b){null!=a&&(h.width=a);null!=b&&(h.height=b);l&&C()};this.active=function(){return l};this.getCurrentNumber=function(){return n};this.setSlide=function(a){p(a)};var p=function(a,b,c,d,e){VMM.ExternalAPI.youtube.stopPlayers();n=a;var a=h.ease,j=h.duration,l=!1,m=!1;0==n&&(m=!0);n+1==g.length&&(l=!0);null!=b&&""!=b&&(a=b);null!=c&&""!=c&&(j=
c);b=VMM.Element.position(g[n]);m?VMM.Element.visible(k,!1):(VMM.Element.visible(k,!0),h.timeline&&VMM.attachElement(q,z[n-1].date),VMM.attachElement(r,VMM.Util.unlinkify(z[n-1].title)));l?VMM.Element.visible(f,!1):(VMM.Element.visible(f,!0),h.timeline&&VMM.attachElement(o,z[n+1].date),VMM.attachElement(x,VMM.Util.unlinkify(z[n+1].title)));d?VMM.Element.css(i,"left",-(b.left-h.content_padding)):(VMM.Element.stop(i),VMM.Element.animate(i,j,a,{left:-(b.left-h.content_padding)}));e&&VMM.fireEvent(s,
"LOADED");VMM.Element.height(g[n])>h.height?VMM.Element.css(".slider","overflow-y","scroll"):(VMM.Element.css(s,"overflow-y","hidden"),VMM.Element.animate(s,j,a,{scrollTop:VMM.Element.prop(s,"scrollHeight")-VMM.Element.height(s)}))}});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Util&&(VMM.Util={init:function(){return this},randomBetween:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},customSort:function(a,b){return a==b?0:a>b?1:-1},number2money:function(a,b,c){b=null!==b?b:!0;c=null!==c?c:!1;a=this.niceNumber(VMM.Math2.floatPrecision(a,2));return!a.split(/\./g)[1]&&c&&(a+=".00"),b&&(a="$"+a),a},wordCount:function(a){var a=a+" ",b=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").replace(/[^A-Za-z0-9\'\-]+/gi," ").split(" ").length-
1;return 2>a.length&&(b=0),b},parseDate:function(a){var b;if(a.match(/,/gi)){a=a.split(",");for(b=0;b<a.length;b++)a[b]=parseInt(a[b]);b=new Date;a[0]&&b.setFullYear(a[0]);1<a[1]?b.setMonth(a[1]-1):b.setMonth(0);1<a[2]?b.setDate(a[2]):b.setDate(1);1<a[3]?b.setHours(a[3]):b.setHours(0);1<a[4]?b.setMinutes(a[4]):b.setMinutes(0);1<a[5]?b.setSeconds(a[5]):b.setSeconds(0);1<a[6]?b.setMilliseconds(a[6]):b.setMilliseconds(0)}else a.match("/")?b=new Date(a):5>a.length?(b=new Date,b.setFullYear(parseInt(a)),
b.setMonth(0),b.setDate(1),b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0)):b=new Date(parseInt(a.slice(0,4)),parseInt(a.slice(4,6))-1,parseInt(a.slice(6,8)),parseInt(a.slice(8,10)),parseInt(a.slice(10,12)));return b},ratio:{r16_9:function(a,b){if(null!==a&&""!==a)return Math.round(9*(b/16));if(null!==b&&""!==b)return Math.round(16*(a/9))},r4_3:function(a,b){if(null!==a&&""!==a)return Math.round(3*(b/4));if(null!==b&&""!==b)return Math.round(4*(a/3))}},date:{month:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),
month_abbr:"Jan.,Feb.,March,April,May,June,July,Aug.,Sept.,Oct.,Nov.,Dec.".split(","),day:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),day_abbr:"Sun.,Mon.,Tues.,Wed.,Thurs.,Fri.,Sat.".split(","),hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],prettyDate:function(a,b){return"date"==type.of(a)?0===a.getMonth()&&1==a.getDate()&&0===a.getHours()&&0===a.getMinutes()?a.getFullYear():1>=a.getDate()&&0===a.getHours()&&0===a.getMinutes()?b?a.getMonth():
(a.getMonth(),a.getFullYear()):0===a.getHours()&&0===a.getMinutes()?b?(a.getMonth(),a.getDate()):(a.getMonth(),a.getDate(),a.getFullYear()):0===a.getMinutes()?b?VMM.Util.date.get12HRTime(a):(VMM.Util.date.get12HRTime(a),a.getMonth(),a.getDate(),a.getFullYear()):b?(a.getDay(),a.getMonth(),a.getDate(),a.getFullYear(),VMM.Util.date.get12HRTime(a)):(VMM.Util.date.get12HRTime(a),a.getDay(),a.getMonth(),a.getDate(),a.getFullYear()):(trace("NOT A VALID DATE?"),trace(a)),""},prettyMonth:function(){return"date"!=
type.of(t),""},get12HRTime:function(a,b){var c="";return"date"==type.of(a)&&(c=VMM.Util.date.theHour(a.getHours())+":"+VMM.Util.date.minuteZeroFill(a.getMinutes()),b&&(c=c+":"+VMM.Util.date.minuteZeroFill(a.getSeconds())),c+=VMM.Util.date.hourSuffix(a.getHours())),c},theHour:function(a){return 0<a&&13>a?a:"0"==a?(a=12,a):0===a?12:a-12},minuteZeroFill:function(a){return 9<a?""+a:"0"+a},hourSuffix:function(a){return 12>a?" am":" pm"}},doubledigit:function(a){return(10>a?"0":"")+a},truncateWords:function(a,
b,c){b||(b=30);c||(c=b);for(var a=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").split(" "),d=[],b=Math.min(a.length,b),c=Math.min(a.length,c),e=0;e<b;e++)d.push(a[e]);for(;e<c&&!(b=a[e],d.push(b),"."==b.charAt(b.length-1));e++);return d.join(" ")},linkify:function(a,b,c){return a?(a=a.replace(/((https?\:\/\/|ftp\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(a){var e="";return 0>a.search("^https?://")&&(a="http://"+a),e="onclick = 'void(0)'",c&&(e="onclick = 'void(0)'"),onclick=
"void(0)",null===b||""===b?'<a href="'+a+" "+e+'">'+a+"</a>":"<a href='"+a+" "+e+" target='"+b+"'>'"+a+"</a>"}),a):a},unlinkify:function(a){return a?(a=a.replace(/<a\b[^>]*>/i,""),a=a.replace(/<\/a>/i,""),a):a},nl2br:function(a){return a.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(a){for(var b="",c=0;c<a;c++)b+="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ".substr(Math.floor(62*Math.random()),1);return b},isEven:function(a){return 0===a%2?!0:!1},getUrlVars:function(a){for(var b=
[],c=a.slice(a.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return trace(b),b},toHTML:function(a){return a=this.nl2br(a),a=this.linkify(a),a.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(a,b){!1!==b&&(b=!0);for(var c=(b?a.toLowerCase():a).split(" "),d=0;d<c.length;d++)c[d]=c[d].substr(0,1).toUpperCase()+c[d].substr(1);return c.join(" ")},properQuotes:function(a){return a.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},niceNumber:function(a){var a=
""+Math.abs(Number(a)),b=a.split(/\./g)[0],a=a.split(/\./g)[1],c="",b=b.toArray();b.reverse();for(var d=1;d<=b.length;d++)0==d%3&&d<b.length?c=","+b[d-1]+c:c=b[d-1]+c;return null!=a&&""!=a&&void 0!=a?c+"."+a:c},toTitleCase:function(a){var b={__smallWords:"a,an,and,as,at,but,by,en,for,if,in,of,on,or,the,to,v[.]?,via,vs[.]?".split(","),init:function(){this.__smallRE=this.__smallWords.join("|");this.__lowerCaseWordsRE=RegExp("\\b("+this.__smallRE+")\\b","gi");this.__firstWordRE=RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+
this.__smallRE+")\\b","gi");this.__lastWordRE=RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(a){for(var b="",a=a.split(/([:.;?!][ ]|(?:[ ]|^)["\u00e2\u20ac\u0153])/),e=0;e<a.length;++e)var f=a[e],f=f.replace(/\b([a-zA-Z][a-z.'\u00e2\u20ac\u2122]*)\b/g,this.__titleCaseDottedWordReplacer),f=f.replace(this.__lowerCaseWordsRE,this.__lowerReplacer),f=f.replace(this.__firstWordRE,this.__firstToUpperCase),f=f.replace(this.__lastWordRE,this.__firstToUpperCase),b=b+
f;return b=b.replace(/ V(s?)\. /g," v$1. "),b=b.replace(/(['\u00e2\u20ac\u2122])S\b/g,"$1s"),b=b.replace(/\b(AT&T|Q&A)\b/ig,this.__upperReplacer),b},__titleCaseDottedWordReplacer:function(a){return a.match(/[a-zA-Z][.][a-zA-Z]/)?a:b.__firstToUpperCase(a)},__lowerReplacer:function(a){return a.toLowerCase()},__upperReplacer:function(a){return a.toUpperCase()},__firstToUpperCase:function(a){a=a.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);return a[1]=a[1].toUpperCase(),a.join("")}};return b.init(),a=a.replace(/_/g,
" "),a=b.toTitleCase(a),a}}.init());
!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,d,e){var f,k;this.type=b;this.$element=a(d);this.options=this.getOptions(e);this.enabled=!0;"manual"!=this.options.trigger&&(f="hover"==this.options.trigger?"mouseenter":"focus",k="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(f,this.options.selector,a.proxy(this.enter,this)),this.$element.on(k,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=
a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);!d.options.delay||!d.options.delay.show?d.show():(d.hoverState="in",setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show))},leave:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);
!d.options.delay||!d.options.delay.hide?d.hide():(d.hoverState="out",setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide))},show:function(){var a,b,e,f,k,m,o;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();this.options.animation&&a.addClass("fade");m="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;b=/in/.test(m);a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body);
e=this.getPosition(b);f=a[0].offsetWidth;k=a[0].offsetHeight;switch(b?m.split(" ")[1]:m){case "bottom":o={top:e.top+e.height,left:e.left+e.width/2-f/2};break;case "top":o={top:e.top-k,left:e.left+e.width/2-f/2};break;case "left":o={top:e.top+e.height/2-k/2,left:e.left-f};break;case "right":o={top:e.top+e.height/2-k/2,left:e.left+e.width}}a.css(o).addClass(m).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},
hide:function(){function b(){var c=setTimeout(function(){d.off(a.support.transition.end).remove()},500);d.one(a.support.transition.end,function(){clearTimeout(c);d.remove()})}var d=this.tip();d.removeClass("in");a.support.transition&&this.$tip.hasClass("fade")?b():d.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},
getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,e=this.options;return a=b.attr("data-original-title")||("function"==typeof e.title?e.title.call(b[0]):e.title),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=
null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f));"string"==typeof c&&e[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",
title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Timeline&&(VMM.Timeline=function(a,b){var c,d,e,f,k,m,o,q;function x(a,b){l=b.timeline;"array"!=type.of(l.era)&&(l.era=[]);A()}function r(){p();u.setSize(c,d);h.setSize(e,f);500>e?(VMM.Element.hide("div.navigation"),VMM.Element.hide("div.nav-next"),VMM.Element.hide("div.nav-previous"),VMM.Element.height(".slider-container-mask",f)):(VMM.Element.show("div.navigation"),VMM.Element.show("div.nav-next"),VMM.Element.show("div.nav-previous"),VMM.Element.height(".slider-container-mask",
d));820>e&&!(500>e)}function C(){k.slider=!0;J()}function J(){k.percentloaded+=25;k.slider&&k.timenav&&VMM.Element.animate(n,o,4*m,{opacity:0},i)}function K(){k.timenav=!0;J()}function M(){h.setMarker(u.getCurrentNumber(),m,o)}function z(){u.setSlide(h.getCurrentNumber())}var g=VMM.getElement("#timeline"),n,y=VMM.getElement("#timeline");n=VMM.appendAndGetElement(g,"<div>","feedback","");VMM.appendAndGetElement(n,"<div>","messege","Loading Timeline");var u=new VMM.Slider("div.slider",720,400,!0),h=
new VMM.Timeline.TimeNav("div.navigation",720,400,!0),l={},w=[];q=o=m=k=f=e=d=c=void 0;e=960;f=540;k={slider:!1,timenav:!1,percentloaded:0};m="easeInOutExpo";o=1E3;null!=a&&""!=a?(e=a,VMM.Element.width(g,a)):e=VMM.Element.width(g);null!=b&&""!=b?(f=b,VMM.Element.height(g,b)):f=VMM.Element.height(g);"mobile"==VMM.Browser.device?(q=200,c=e,d=f):(q=200,c=e,d=f-q);var j=!1;$.browser.msie&&7==parseInt($.browser.version,10)&&(j=!0);this.ver="0.85";this.init=function(a){trace("init");VMM.bindEvent(global,
x,"DATAREADY");j?(n=VMM.appendAndGetElement(g,"<div>","feedback",""),VMM.appendAndGetElement(n,"<div>","messege","Internet Explorer 7 is not supported by Timeline.")):("string"==type.of(a)?VMM.Timeline.DataObj.getData(a):VMM.Timeline.DataObj.getData(y),n=VMM.appendAndGetElement(g,"<div>","feedback",""),VMM.appendAndGetElement(n,"<div>","messege","Loading Timeline"))};this.iframeLoaded=function(){trace("iframeLoaded")};var i=function(){VMM.Element.detach(n)},v=function(){VMM.attachElement(g,"");VMM.appendElement(g,
"<div class='container main'><div class='feature'><div class='slider'></div></div><div class='navigation'></div></div>");r();VMM.bindEvent("div.slider",C,"LOADED");VMM.bindEvent("div.navigation",K,"LOADED");VMM.bindEvent("div.slider",M,"UPDATE");VMM.bindEvent("div.navigation",z,"UPDATE");u.init(w);h.init(w,l.era);VMM.bindEvent(global,r,"resize");VMM.bindEvent(global,function(a){a.preventDefault()},"touchmove")},s=function(a,b){p();var e="",f,g;g=f="";var j=!1,i=!1,h=!1;"date"==type.of(b)&&(j=!0,"start"!=
a.type&&(f+=VMM.createElement("h2",VMM.Util.date.prettyDate(b),"date")),null!=a.headline&&""!=a.headline&&"tweets"!=a.type&&("start"==a.type?f+=VMM.createElement("h2",a.headline,"start"):f+=VMM.createElement("h3",a.headline)),null!=a.text&&""!=a.text&&(h=!0,f+=VMM.createElement("p",a.text)),f=VMM.createElement("div",f,"container"),f=VMM.createElement("div",f,"text"));j&&null!=a.asset&&""!=a.asset&&null!=a.asset.media&&""!=a.asset.media&&(i=!0,g=VMM.MediaElement.create("",a.asset,!0,c,d));j&&(e="content-container layout",
h&&(e+="-text"),i&&(e+="-media"),e=VMM.createElement("div",f+g,e));return e},p=function(){e=VMM.Element.width(g);f=VMM.Element.height(g);c=e;"mobile"==VMM.Browser.device?d=f:d=f-q-3},A=function(){p();if(null!=l.headline&&""!=l.headline&&null!=l.text&&""!=l.text){trace("HAS STARTPAGE");var a={};"google spreadsheet"==l.type?(trace("google spreadsheet startpage date"+l.startDate),a.startdate=new Date(Date.parse(l.startDate)),trace(a.startdate)):a.startdate=VMM.Util.parseDate(l.startDate);a.uniqueid=
VMM.Util.unique_ID(5);a.enddate=a.startdate;a.title=l.headline;a.headline=l.headline;a.text=l.text;a.type="start";a.date=VMM.Util.date.prettyDate(l.startDate);a.asset=l.asset;a.fulldate=a.startdate.getTime();a.content=s(a,a.startdate);null!=a.content&&""!=a.content&&w.push(a)}for(var b=0;b<l.date.length;b++)null!=l.date[b].startDate&&""!=l.date[b].startDate&&(a={},"tweets"==l.date[b].type?a.startdate=VMM.ExternalAPI.twitter.parseTwitterDate(l.date[b].startDate):"google spreadsheet"==l.date[b].type?
(a.startdate=new Date(Date.parse(l.date[b].startDate)),trace(a.startdate)):a.startdate=VMM.Util.parseDate(l.date[b].startDate),a.uniqueid=l.date[b].startDate.toString()+"-"+b.toString(),null!=l.date[b].endDate&&""!=l.date[b].endDate?"tweets"==l.date[b].type?a.enddate=VMM.ExternalAPI.twitter.parseTwitterDate(l.date[b].endDate):"google spreadsheet"==l.date[b].type?a.enddate=new Date(Date.parse(l.date[b].endDate)):a.enddate=VMM.Util.parseDate(l.date[b].endDate):a.enddate=a.startdate,a.title=l.date[b].headline,
a.type=l.date[b].type,a.date=VMM.Util.date.prettyDate(a.startdate),a.asset=l.date[b].asset,a.fulldate=a.startdate.getTime(),a.content=s(l.date[b],a.startdate),null!=a.content&&""!=a.content&&w.push(a));w.sort(function(a,b){return a.fulldate-b.fulldate});v()}},VMM.Timeline.TimeNav=function(a,b){var c,d,e,f,k,m,o,q;function x(a){VMM.Element.css(aa,"left",Math.round(c/2)+2);Q(l,d,e,!0,a)}function r(){trace("CLICK");VMM.DragSlider.cancelSlide();f>k&&(f-=1,0>f&&(f=k),V(),W(!0))}function C(){trace("CLICK");
VMM.DragSlider.cancelSlide();f<m&&(f+=1,V(),W(!0))}function J(){VMM.DragSlider.cancelSlide();Q(0);VMM.fireEvent(I,"UPDATE")}function K(a){VMM.DragSlider.cancelSlide();Q(a.data.number);VMM.fireEvent(I,"UPDATE")}function M(a){VMM.Element.toggleClass(a.data.elem,"zFront")}function z(a,b){VMM.Element.animate(B,b.time/2,d,{left:b.left})}trace("VMM.Timeline.TimeNav");var g=[],n,y=[],u=[],h={},l=0,w=!1,j={type:"year",number:10,first:1970,last:2011,multiplier:100},i={type:"year",number:10,first:1970,last:2011,
multiplier:100},v={},s={},p={},A={},D={},H={},E={},F={},G={};c=900;d="easeInOutExpo";e=1E3;o=[1,1,1];f=6;m=16;k=1;q=!1;o=[48,96,1];null!=b&&""!=b&&(c=b);var w=!1,B="",O="",P="",ba="",R="",X="",S="",aa="",T="",L="",Y="",Z="";void 0;void 0;void 0;void 0;void 0;void 0;this.ver="0.1";var I=a;this.init=function(a,b){trace("VMM.Timeline.TimeNav init");"undefined"!=typeof a?this.setData(a,b):trace("WAITING ON DATA")};this.setData=function(a,b){if("undefined"!=typeof a){g=a;n=b;VMM.attachElement(I,"");B=
VMM.appendAndGetElement(I,"<div>","timenav");O=VMM.appendAndGetElement(B,"<div>","content");P=VMM.appendAndGetElement(B,"<div>","time");ba=VMM.appendAndGetElement(P,"<div>","time-interval-minor");X=VMM.appendAndGetElement(P,"<div>","time-interval-major");R=VMM.appendAndGetElement(P,"<div>","time-interval");S=VMM.appendAndGetElement(I,"<div>","timenav-background");aa=VMM.appendAndGetElement(S,"<div>","timenav-line");VMM.appendAndGetElement(S,"<div>","timenav-interval-background","<div class='top-highlight'></div>");
h=N(g[g.length-1].enddate-g[0].startdate,!0);var d=N(g[0].startdate),e=N(g[g.length-1].enddate);G.type="millenium";G.first=d.milleniums;G.base=Math.floor(d.milleniums);G.last=e.milleniums;G.number=h.milleniums;G.multiplier=1E3;G.minor=1E3;F.type="century";F.first=d.centuries;F.base=Math.floor(d.centuries);F.last=e.centuries;F.number=h.centuries;F.multiplier=100;F.minor=100;E.type="decade";E.first=d.decades;E.base=Math.floor(d.decades);E.last=e.decades;E.number=h.decades;E.multiplier=10;E.minor=10;
p.type="year";p.first=d.years;p.base=Math.floor(d.years);p.last=e.years;p.number=h.years;p.multiplier=1;p.minor=12;s.type="month";s.first=d.months;s.base=Math.floor(d.months);s.last=e.months;s.number=h.months;s.multiplier=1;s.minor=Math.round(4.34812141);v.type="day";v.first=d.days;v.base=Math.floor(d.days);v.last=e.days;v.number=h.days;v.multiplier=1;v.minor=24;A.type="hour";A.first=d.hours;A.base=Math.floor(d.hours);A.last=e.hours;A.number=h.hours;A.multiplier=1;A.minor=60;D.type="minute";D.first=
d.minutes;D.base=Math.floor(d.minutes);D.last=e.minutes;D.number=h.minutes;D.multiplier=1;D.minor=60;H.type="decade";H.first=d.seconds;H.base=Math.floor(d.seconds);H.last=e.seconds;H.number=h.seconds;H.multiplier=1;H.minor=10;h.milleniums>g.length/2?j=G:h.centuries>g.length/2?j=Math.ceil(F):h.decades>g.length/2?j=E:h.years>g.length/2?j=p:h.months>g.length/2?j=s:h.days>g.length/2?j=v:h.hours>g.length/2?j=A:h.minutes>g.length/2?j=D:h.seconds>g.length/2?j=H:(trace("NO FUCKING IDEA WHAT THE TYPE SHOULD BE"),
j.type="unknown");1<=h.milleniums?i=G:1<=h.centuries?i=F:1<=h.decades?i=E:1<=h.years?i=p:1<h.months?i=s:1<h.weeks?i=s:1<h.days?i=v:1<h.hours?i=A:1<h.minutes?i=D:1<h.seconds?i=D:(trace("NO FUCKING IDEA WHAT THE TYPE SHOULD BE"),i.type="unknown");T=VMM.appendAndGetElement(ba,"<div>","minor");V();for(d=0;d<g.length;d++){var f,l,k,e=VMM.appendAndGetElement(O,"<div>","marker");f=VMM.appendAndGetElement(e,"<div>","flag");l=VMM.appendAndGetElement(f,"<div>","flag-content");VMM.appendAndGetElement(e,"<div>",
"dot");k=VMM.appendAndGetElement(e,"<div>","line");k=VMM.appendAndGetElement(k,"<div>","event-line");null!=g[d].asset&&""!=g[d].asset&&VMM.appendElement(l,VMM.MediaElement.thumbnail(g[d].asset,32,32));VMM.appendElement(l,"<h3>"+VMM.Util.unlinkify(g[d].title)+"</h3><h4>"+g[d].date+"</h4>");VMM.Element.attr(e,"id",g[d].uniqueid.toString());VMM.bindEvent(f,K,"",{number:d});VMM.bindEvent(f,M,"mouseenter mouseleave",{number:d,elem:f});e={marker:e,flag:f,lineevent:k,type:"marker"};"start"==g[d].type&&(trace("BUILD MARKER HAS START PAGE"),
q=!0,e.type="start");u.push(e)}for(d=0;d<n.length;d++)e={content:"",startdate:"",enddate:"",headline:"",uniqueid:"",color:""},e.title=n[d].headline,e.uniqueid=VMM.Util.unique_ID(4),e.color=n[d].color,e.content=VMM.appendAndGetElement(O,"<div>","era"),VMM.Element.attr(e.content,"id",e.uniqueid),VMM.Element.css(e.content,"background",e.color),VMM.appendElement(e.content,"<h3>"+VMM.Util.unlinkify(e.title)+"</h3>"),e.startdate=VMM.Util.parseDate(n[d].startDate),e.enddate=VMM.Util.parseDate(n[d].endDate),
y.push(e);W();x(!0);VMM.fireEvent(I,"LOADED");L=VMM.appendAndGetElement(I,"<div>","toolbar");q&&($backhome=VMM.appendAndGetElement(L,"<div>","back-home","<div class='icon'></div>"),VMM.bindEvent(".back-home",J,"click"),VMM.Element.css(L,"top",27));Y=VMM.appendAndGetElement(L,"<div>","zoom-in","<div class='icon'></div>");Z=VMM.appendAndGetElement(L,"<div>","zoom-out","<div class='icon'></div>");VMM.Element.attribute($backhome,"title","Return to Title");VMM.Element.attribute($backhome,"rel","tooltip");
VMM.Element.attribute(Y,"title","Expand Timeline");VMM.Element.attribute(Y,"rel","tooltip");VMM.Element.attribute(Z,"title","Contract Timeline");VMM.Element.attribute(Z,"rel","tooltip");VMM.bindEvent(".zoom-in",r,"click");VMM.bindEvent(".zoom-out",C,"click");L.tooltip({selector:"div[rel=tooltip]",placement:"right"});"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device?(VMM.TouchSlider.createPanel(S,B,c,15,!1),VMM.bindEvent(B,z,"TOUCHUPDATE")):VMM.DragSlider.createPanel(I,B,c,15,!1);w=!0}else trace("NO DATA")};
this.setSize=function(a){null!=a&&(c=a);w&&x()};this.setMarker=function(a,b,c){Q(a,b,c)};this.getCurrentNumber=function(){return l};var U=function(a,b,c){var a=a.type,d=N(b),e=N(c),g=b.months,i=c.months;return"millenium"==a?(g=b.milleniums,i=c.milleniums):"century"==a?(g=d.centuries,i=e.centuries):"decade"==a?(g=d.decades,i=e.decades):"year"==a?(g=d.years,i=e.years):"month"==a?(g=d.months,i=e.months):"week"==a?(g=d.weeks,i=e.weeks):"day"==a?(g=d.days,i=e.days):"hour"==a?(g=d.hours,i=e.hours):"minute"==
a&&(g=d.minutes,i=e.minutes),_pos=(g-j.base)*(200/f),_pos_end=(i-j.base)*(200/f),pos={begin:_pos,end:_pos_end}},W=function(a){var b=2,f=0,i=0,h=0;VMM.Element.removeClass(".flag","row1");VMM.Element.removeClass(".flag","row2");VMM.Element.removeClass(".flag","row3");for(var k=0;k<u.length;k++){var m,n=u[k].marker,r=u[k].flag,s=u[k].lineevent;m=U(j,g[k].startdate,g[k].enddate);p=m.begin;_pos_end=m.end;p=Math.round(p+-2);_pos_end=Math.round(_pos_end+-2);m=Math.round(_pos_end-p);a?(VMM.Element.stop(n),
VMM.Element.animate(n,e/2,d,{left:p})):VMM.Element.css(n,"left",p);k==l&&(h=p);5<m&&(VMM.Element.css(s,"height",6),VMM.Element.css(s,"width",m),VMM.Element.css(s,"top",150));165>p-f?b<o.length-1?b++:(b=0,i++):(i=0,b=0);f=p;a?(VMM.Element.stop(r),VMM.Element.animate(r,e,d,{top:o[b]})):VMM.Element.css(r,"top",o[b]);q&&"start"==u[k].type&&VMM.Element.visible(n,!1)}for(b=0;b<y.length;b++){var p=y[b],f=p.content,p=U(j,p.startdate,p.enddate),i=p.end-p.begin;VMM.Element.css(f,"left",p.begin);VMM.Element.css(f,
"width",i)}a&&(VMM.Element.stop(B),VMM.Element.animate(B,e/2,d,{left:c/2-h}))},N=function(a){var b={};return b.days=a/864E5,b.weeks=b.days/7,b.months=b.days/30.4166666667,b.years=b.months/12,b.hours=24*b.days,b.minutes=1440*b.days,b.seconds=86400*b.days,b.decades=b.years/10,b.centuries=b.years/100,b.milleniums=b.years/1E3,b},V=function(){VMM.attachElement(R,"");VMM.attachElement(X,"");j.date=new Date(g[0].startdate.getFullYear(),0,1,0,0,0);i.date=new Date(g[0].startdate.getFullYear(),0,1,0,0,0);for(var a=
0,b=0,c=!0,d=0,e=0;e<j.number+1;e++){var h;"century"==j.type?(c&&j.date.setFullYear(100*Math.floor(g[0].startdate.getFullYear()/100)),j.date.setFullYear(j.date.getFullYear()+100*a),h=100*Math.floor(j.date.getFullYear()/100)):"decade"==j.type?(c&&j.date.setFullYear(10*Math.floor(g[0].startdate.getFullYear()/10)),j.date.setFullYear(j.date.getFullYear()+10*a),h=10*Math.floor(j.date.getFullYear()/10)):"year"==j.type?(!c,j.date.setFullYear(j.date.getFullYear()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type)):
"month"==j.type?(c&&j.date.setMonth(g[0].startdate.getMonth()),j.date.setMonth(j.date.getMonth()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type)):"week"==j.type?(c&&(j.date.setMonth(g[0].startdate.getMonth()),j.date.setDate(Math.floor(7*g[0].startdate.getDate()))),j.date.setDate(j.date.getDate()+7*a),h=VMM.Util.date.day_abbr[j.date.getDay()]+" "+VMM.Util.date.month_abbr[j.date.getMonth()]+" "+j.date.getDate()):"day"==j.type?(c&&(j.date.setMonth(g[0].startdate.getMonth()),j.date.setDate(g[0].startdate.getDate())),
j.date.setDate(j.date.getDate()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type)):"hour"==j.type?(c&&(j.date.setMonth(g[0].startdate.getMonth()),j.date.setDate(g[0].startdate.getDate()),j.date.setHours(g[0].startdate.getHours())),j.date.setHours(j.date.getHours()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type)):"minute"==j.type?(c&&(j.date.setMonth(g[0].startdate.getMonth()),j.date.setDate(g[0].startdate.getDate()),j.date.setHours(g[0].startdate.getHours()),j.date.setMinutes(g[0].startdate.getMinutes())),
j.date.setMinutes(j.date.getMinutes()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type)):"second"==j.type&&(c&&(j.date.setMonth(g[0].startdate.getMonth()),j.date.setDate(g[0].startdate.getDate()),j.date.setHours(g[0].startdate.getHours()),j.date.setMinutes(g[0].startdate.getMinutes()),j.date.setSeconds(g[0].startdate.getSeconds())),j.date.setSeconds(j.date.getSeconds()+a),h=VMM.Util.date.prettyDate(j.date,!0,j.type));var a=1,c=!1,k=U(j,j.date,j.date),k=k.begin;$interval_date=VMM.appendAndGetElement(R,
"<div>","_idd");VMM.appendElement($interval_date,h);VMM.Element.css($interval_date,"left",k);VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/2));65>k-d?35>k-d?0==e%4?0==k?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display","none"):VMM.Util.isEven(e)?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display",
"");d=k}c=!0;for(e=_major_last_pos=_major_first_pos=0;e<Math.ceil(i.number)+1;e++)"century"==i.type?(c&&i.date.setFullYear(100*Math.floor(g[0].startdate.getFullYear()/100)),i.date.setFullYear(i.date.getFullYear()+100*b),h=100*Math.floor(i.date.getFullYear()/100)):"decade"==i.type?(c&&i.date.setFullYear(10*Math.floor(g[0].startdate.getFullYear()/10)),i.date.setFullYear(i.date.getFullYear()+10*b),h=10*Math.floor(i.date.getFullYear()/10)):"year"==i.type?(!c,i.date.setFullYear(i.date.getFullYear()+b),
h=i.date.getFullYear()):"month"==i.type?(c&&i.date.setMonth(g[0].startdate.getMonth()),i.date.setMonth(i.date.getMonth()+b),h=VMM.Util.date.month[i.date.getMonth()]+" "+i.date.getFullYear()):"week"==i.type?(c&&(i.date.setMonth(g[0].startdate.getMonth()),i.date.setDate(Math.floor(7*g[0].startdate.getDate()))),i.date.setDate(i.date.getDate()+7*b),h=VMM.Util.date.day_abbr[i.date.getDay()]+" "+VMM.Util.date.month_abbr[i.date.getMonth()]+" "+i.date.getDate()):"day"==i.type?(c&&(i.date.setMonth(g[0].startdate.getMonth()),
i.date.setDate(g[0].startdate.getDate())),i.date.setDate(i.date.getDate()+b),h=VMM.Util.date.prettyDate(i.date,!0,i.type)):"hour"==i.type?(c&&(i.date.setMonth(g[0].startdate.getMonth()),i.date.setDate(g[0].startdate.getDate()),i.date.setHours(g[0].startdate.getHours())),i.date.setHours(i.date.getHours()+b),h=VMM.Util.date.prettyDate(i.date,!0,i.type)):"minute"==i.type?(c&&(i.date.setMonth(g[0].startdate.getMonth()),i.date.setDate(g[0].startdate.getDate()),i.date.setHours(g[0].startdate.getHours()),
i.date.setMinutes(g[0].startdate.getMinutes())),i.date.setMinutes(i.date.getMinutes()+b),h=VMM.Util.date.prettyDate(i.date,!0,i.type)):"second"==i.type&&(c&&(i.date.setMonth(g[0].startdate.getMonth()),i.date.setDate(g[0].startdate.getDate()),i.date.setHours(g[0].startdate.getHours()),i.date.setMinutes(g[0].startdate.getMinutes()),i.date.setSeconds(g[0].startdate.getSeconds())),i.date.setSeconds(i.date.getSeconds()+b),h=VMM.Util.date.prettyDate(i.date,!0,i.type)),trace("interval_major.type "+i.type),
b=1,k=U(j,i.date,i.date),k=k.begin,$interval_date=VMM.appendAndGetElement(X,"<div>","major"),VMM.appendElement($interval_date,h),VMM.Element.css($interval_date,"left",k),VMM.Element.css($interval_date,"left",k),VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/2)),c&&(_major_first_pos=k),c=!1,_major_last_pos=k;VMM.Element.width(O,j.number*(200/f));_minor_pos_offset=50;a=_major_last_pos-_major_first_pos+6*_minor_pos_offset;d+=6*_minor_pos_offset;a<d?VMM.Element.width(T,
d):VMM.Element.width(T,a);VMM.Element.css(T,"left",_major_first_pos-_minor_pos_offset);VMM.Element.width(R)},Q=function(a,b,f){l=a;var a=d,g=e,h=!1,i=!1;0==l&&(i=!0);l+1==u.length&&(h=!0);null!=b&&""!=b&&(a=b);null!=f&&""!=f&&(g=f);b=VMM.Element.position(u[l].marker);for(f=0;f<u.length;f++)VMM.Element.removeClass(u[f].marker,"active");q&&"start"==u[l].type&&(VMM.Element.visible(u[l].marker,!1),VMM.Element.addClass(u[l].marker,"start"));VMM.Element.addClass(u[l].marker,"active");!i;!h;VMM.Element.stop(B);
VMM.Element.animate(B,g,a,{left:c/2-b.left})}},VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(a){data=VMM.Timeline.DataObj.data_obj;"string"!=type.of(a)?(trace("DATA SOURCE: NOT JSON"),trace("TRYING HTML PARSE"),VMM.Timeline.DataObj.parseHTML(a)):a.match("%23")?(trace("DATA SOURCE: TWITTER SEARCH"),VMM.Timeline.DataObj.model_Tweets.getData("%23medill")):a.match("spreadsheet")?(trace("DATA SOURCE: GOOGLE SPREADSHEET"),VMM.Timeline.DataObj.model_GoogleSpreadsheet.getData(a)):(trace("DATA SOURCE: JSON"),
VMM.getJSON(a,VMM.Timeline.DataObj.parseJSON))},parseHTML:function(){trace("parseHTML");var a=VMM.Timeline.DataObj.data_template_obj;if(VMM.Element.find("#timeline section","time")[0]){a.timeline.startDate=VMM.Element.html(VMM.Element.find("#timeline section","time")[0]);a.timeline.headline=VMM.Element.html(VMM.Element.find("#timeline section","h2"));a.timeline.text=VMM.Element.html(VMM.Element.find("#timeline section","article"));var b=!1;0!=VMM.Element.find("#timeline section","figure img").length?
(b=!0,a.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure img"),"src")):0!=VMM.Element.find("#timeline section","figure a").length&&(b=!0,a.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure a"),"href"));b&&(0!=VMM.Element.find("#timeline section","cite").length&&(a.timeline.asset.credit=VMM.Element.html(VMM.Element.find("#timeline section","cite"))),0!=VMM.Element.find(this,"figcaption").length&&(a.timeline.asset.caption=VMM.Element.html(VMM.Element.find("#timeline section",
"figcaption"))))}VMM.Element.each("#timeline li",function(){var b={type:"default",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(0!=VMM.Element.find(this,"time")){b.startDate=VMM.Element.html(VMM.Element.find(this,"time")[0]);VMM.Element.find(this,"time")[1]&&(b.endDate=VMM.Element.html(VMM.Element.find(this,"time")[0]));b.headline=VMM.Element.html(VMM.Element.find(this,"h3"));b.text=VMM.Element.html(VMM.Element.find(this,"article"));var d=!1;0!=VMM.Element.find(this,
"figure img").length?(d=!0,b.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure img"),"src")):0!=VMM.Element.find(this,"figure a").length&&(d=!0,b.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure a"),"href"));d&&(0!=VMM.Element.find(this,"cite").length&&(b.asset.credit=VMM.Element.html(VMM.Element.find(this,"cite"))),0!=VMM.Element.find(this,"figcaption").length&&(b.asset.caption=VMM.Element.html(VMM.Element.find(this,"figcaption"))));trace(b);a.timeline.date.push(b)}});VMM.fireEvent(global,
"DATAREADY",a)},parseJSON:function(a){"default"==a.timeline.type?(trace("DATA SOURCE: JSON STANDARD TIMELINE"),VMM.fireEvent(global,"DATAREADY",a)):"twitter"==a.timeline.type?(trace("DATA SOURCE: JSON TWEETS"),VMM.Timeline.DataObj.model_Tweets.buildData(a)):(trace("DATA SOURCE: NO IDEA"),trace(type.of(a.timeline)))},model_Tweets:{type:"twitter",buildData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweets(a.timeline.tweets)},
getData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweetSearch(a)},onTwitterDataReady:function(a,b){for(var c=VMM.Timeline.DataObj.data_template_obj,d=0;d<b.tweetdata.length;d++){var e={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};e.startDate=b.tweetdata[d].raw.created_at;type.of(b.tweetdata[d].raw.from_user_name)?e.headline=b.tweetdata[d].raw.from_user_name+
" (<a href='https://twitter.com/"+b.tweetdata[d].raw.from_user+"'>@"+b.tweetdata[d].raw.from_user+"</a>)":e.headline=b.tweetdata[d].raw.user.name+" (<a href='https://twitter.com/"+b.tweetdata[d].raw.user.screen_name+"'>@"+b.tweetdata[d].raw.user.screen_name+"</a>)";e.asset.media=b.tweetdata[d].content;c.timeline.date.push(e)}VMM.fireEvent(global,"DATAREADY",c)}},model_GoogleSpreadsheet:{type:"google spreadsheet",getData:function(a){a="https://spreadsheets.google.com/feeds/list/"+VMM.Util.getUrlVars(a).key+
"/od6/public/values?alt=json";VMM.getJSON(a,VMM.Timeline.DataObj.model_GoogleSpreadsheet.buildData)},buildData:function(a){for(var b=VMM.Timeline.DataObj.data_template_obj,c=0;c<a.feed.entry.length;c++){var d=a.feed.entry[c];if(d.gsx$titleslide.$t.match("start"))b.timeline.startDate=d.gsx$startdate.$t,b.timeline.headline=d.gsx$headline.$t,b.timeline.asset.media=d.gsx$media.$t,b.timeline.asset.caption=d.gsx$mediacaption.$t,b.timeline.asset.credit=d.gsx$mediacredit.$t,b.timeline.text=d.gsx$text.$t,
b.timeline.type="google spreadsheet";else{var e={type:"google spreadsheet",startDate:"",endDate:"",headline:"",text:"",type:"google spreadsheet",asset:{media:"",credit:"",caption:""},tags:"Optional"};e.endDate=d.gsx$enddate.$t;e.startDate=d.gsx$startdate.$t;e.headline=d.gsx$headline.$t;e.asset.media=d.gsx$media.$t;e.asset.caption=d.gsx$mediacaption.$t;e.asset.credit=d.gsx$mediacredit.$t;e.text=d.gsx$text.$t;b.timeline.date.push(e)}}VMM.fireEvent(global,"DATAREADY",b)}},data_template_obj:{timeline:{headline:"",
description:"",asset:{media:"",credit:"",caption:""},date:[]}},date_obj:{startDate:"2012,2,2,11,30",headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",credit:"",caption:""},tags:"Optional"}});$(document).ready(function(){(new VMM.Timeline).init("http://www.travisberry.com/timeline.json")});
JQTWEET={user:"travisberry",numTweets:1,appendTo:"#tweet",loadTweets:function(){$.ajax({url:"http://api.twitter.com/1/statuses/user_timeline.json/",type:"GET",dataType:"jsonp",data:{screen_name:JQTWEET.user,include_rts:!0,count:JQTWEET.numTweets,include_entities:!0},success:function(a){$("#tweet-box").append("<div class='vcard author'><a class='screen-name url' href='https://twitter.com/#!/travisberry' data-screen-name='travisberry'><span class='avatar'><img src='https://si0.twimg.com/profile_images/1359025453/selfPicCrop_normal.png' alt=''></span><span class='fn'>Travis Berry</span><span class='nickname'>@travisberry</span></a></div>");
for(var b=0;b<a.length;b++)$(JQTWEET.appendTo).append('<div class="tweet">TWEET_TEXT<div class="time">AGO</div>'.replace("TWEET_TEXT",JQTWEET.ify.clean(a[b].text)).replace(/USER/g,a[b].user.screen_name).replace("AGO",JQTWEET.timeAgo(a[b].created_at)).replace(/ID/g,a[b].id_str))}})},timeAgo:function(a){var b=new Date,c=new Date(a);$.browser.msie&&(c=Date.parse(a.replace(/( \+)/," UTC$1")));a=b-c;return isNaN(a)||0>a?"":2E3>a?"right now":6E4>a?Math.floor(a/1E3)+" seconds ago":12E4>a?"about 1 minute ago":
36E5>a?Math.floor(a/6E4)+" minutes ago":72E5>a?"about 1 hour ago":864E5>a?Math.floor(a/36E5)+" hours ago":864E5<a&&1728E5>a?"yesterday":31536E6>a?Math.floor(a/864E5)+" days ago":"over a year ago"},ify:{link:function(a){return a.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(a,c,d,e,f){return'<a class="twtr-hyperlink" target="_blank" href="'+(d.match(/w/)?"http://":"")+c+'">'+(25<c.length?c.substr(0,24)+"...":c)+"</a>"+f})},at:function(a){return a.replace(/\B[@\uff20]([a-zA-Z0-9_]{1,20})/g,
function(a,c){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+c+'">@'+c+"</a>"})},list:function(a){return a.replace(/\B[@\uff20]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(a,c){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+c+'">@'+c+"</a>"})},hash:function(a){return a.replace(/(^|\s+)#(\w+)/gi,function(a,c,d){return c+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+d+'">#'+d+"</a>"})},clean:function(a){return this.hash(this.at(this.list(this.link(a))))}}};
$(document).ready(function(){JQTWEET.loadTweets()});
