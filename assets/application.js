(function(c){var a=c.scrollTo=function(d,f,g){c(window).scrollTo(d,f,g)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var d=this,f=!d.nodeName||c.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return d}var g=(d.contentWindow||d).document||d.ownerDocument||d;return c.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var n=this,l=c(n),m=f,j,k={},h=l.is("html,body");switch(typeof m){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(m)){m=b(m);break}m=c(m,this);case"object":if(m.is||m.style){j=(m=c(m)).offset()}}c.each(d.axis.split(""),function(q,r){var u=r=="x"?"Left":"Top",s=u.toLowerCase(),w="scroll"+u,p=n[w],g=a.max(n,r);if(j){k[w]=j[s]+(h?0:p-l.offset()[s]);if(d.margin){k[w]-=parseInt(m.css("margin"+u))||0;k[w]-=parseInt(m.css("border"+u+"Width"))||0}k[w]+=d.offset[s]||0;if(d.over[s]){k[w]+=m[r=="x"?"width":"height"]()*d.over[s]}}else{var v=m[s];k[w]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*g:v}if(/^\d+$/.test(k[w])){k[w]=k[w]<=0?0:Math.min(k[w],g)}if(!q&&d.queue){if(p!=k[w]){i(d.onAfterFirst)}delete k[w]}});i(d.onAfter);function i(g){l.animate(k,e,d.easing,g&&function(){g.call(this,f,d)})}}).end()};a.max=function(g,j){var n=j=="x"?"Width":"Height",k="scroll"+n;if(!c(g).is("html,body")){return g[k]-c(g)[n.toLowerCase()]()}var o="client"+n,f=g.ownerDocument.documentElement,d=g.ownerDocument.body;return Math.max(f[k],d[k])-Math.min(f[o],d[o])};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);jQuery.fn.topLink=function(a){a=jQuery.extend({min:1,fadeSpeed:200},a);return this.each(function(){var b=$(this);b.hide();$(window).scroll(function(){if($(window).scrollTop()>=a.min){b.fadeIn(a.fadeSpeed)}else{b.fadeOut(a.fadeSpeed)}})})};$(document).ready(function(){$("#top-link").topLink({min:400,fadeSpeed:500});$("#top-link").click(function(a){a.preventDefault();$.scrollTo(0,300)})});(function(b){jQuery.expr[":"].Contains=function(d,e,c){return(d.textContent||d.innerText||"").toUpperCase().indexOf(c[3].toUpperCase())>=0};function a(f,e){var d=b("<form>").attr({id:"searchFrom","class":"filterform",action:"#"}),c=b("<input>").attr({id:"search","class":"filterinput",type:"text",placeholder:"Search..."});b(d).append(c).appendTo(f);b(c).change(function(){var g=b(this).val();if(g){b(e).find("h3:not(:Contains("+g+"))").parent().slideUp();b(e).find("h3:Contains("+g+")").parent().slideDown()}else{b(e).find("article").slideDown()}return false}).keyup(function(){b(this).change()})}b(function(){a(b("#search"),b("#list"))})}(jQuery));function trace(b){window.console?console.log(b):typeof jsTrace!="undefined"&&jsTrace.send(b)}function onYouTubePlayerAPIReady(){VMM.ExternalAPI.youtube.onAPIReady()}(function(){var d=!1,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(j){function a(){!d&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;d=!0;var h=new this;d=!1;for(var b in j){h[b]=typeof j[b]=="function"&&typeof i[b]=="function"&&c.test(j[b])?function(f,e){return function(){var k=this._super;this._super=i[f];var g=e.apply(this,arguments);return this._super=k,g}}(b,j[b]):j[b]}return a.prototype=h,a.prototype.constructor=a,a.extend=arguments.callee,a}})();var global=function(){return this||(1,eval)("this")}();if(typeof VMM=="undefined"){var VMM=Class.extend({});VMM.master_config={init:function(){return this},youtube:{active:!1,array:[],api_loaded:!1}}.init(),VMM.master_config={init:function(){return this},youtube:{active:!1,array:[],api_loaded:!1,que:[]}}.init(),VMM.createElement=function(h,g,l,k,j){var i="";return h!=null&&h!=""&&(i+="<"+h,l!=null&&l!=""&&(i+=" class='"+l+"'"),k!=null&&k!=""&&(i+=" "+k),j!=null&&j!=""&&(i+=" "+j),i+=">",g!=null&&g!=""&&(i+=g),i=i+"</"+h+">"),i},VMM.createMediaElement=function(g,f,j){var i="",h=!1;return i+="<div class='media'>",g!=null&&g!=""&&(valid=!0,i+="<img src='"+g+"'>",j!=null&&j!=""&&(i+=VMM.createElement("div",j,"credit")),f!=null&&f!=""&&(i+=VMM.createElement("div",f,"caption"))),i+="</div>",i},VMM.attachElement=function(d,c){typeof jQuery!="undefined"&&$(d).html(c)},VMM.appendElement=function(d,c){typeof jQuery!="undefined"&&$(d).append(c)},VMM.getHTML=function(d){var c;if(typeof jQuery!="undefined"){return c=$(d).html(),c}},VMM.getElement=function(e,d){var f;if(typeof jQuery!="undefined"){return d?f=$(e).parent().get(0):f=$(e).get(0),f}},VMM.bindEvent=function(i,h,n,m){var l,k="click",j={};n!=null&&n!=""&&(k=n),j!=null&&j!=""&&(j=m),typeof jQuery!="undefined"&&$(i).bind(k,j,h)},VMM.unbindEvent=function(h,g,l){var k,j="click",i={};l!=null&&l!=""&&(j=l),typeof jQuery!="undefined"&&$(h).unbind(j,g)},VMM.fireEvent=function(h,g,l){var k,j="click",i=[];g!=null&&g!=""&&(j=g),l!=null&&l!=""&&(i=l),typeof jQuery!="undefined"&&$(h).trigger(j,i)},VMM.getJSON=function(d,c){typeof jQuery!="undefined"&&$.getJSON(d,c)},VMM.appendAndGetElement=function(j,i,p,o){var n,m="<div>",l="",k="";return i!=null&&i!=""&&(m=i),p!=null&&p!=""&&(l=p),o!=null&&o!=""&&(k=o),typeof jQuery!="undefined"&&(n=$(i),n.addClass(l),n.html(k),$(j).append(n)),n},VMM.Element={init:function(){return this},hide:function(d,c){c!=null&&c!=""?typeof jQuery!="undefined"&&$(d).hide(c):typeof jQuery!="undefined"&&$(d).hide()},remove:function(b){typeof jQuery!="undefined"&&$(b).remove()},detach:function(b){typeof jQuery!="undefined"&&$(b).detach()},append:function(d,c){typeof jQuery!="undefined"&&$(d).append(c)},show:function(d,c){c!=null&&c!=""?typeof jQuery!="undefined"&&$(d).show(c):typeof jQuery!="undefined"&&$(d).show()},load:function(f,e,h){var g={elem:f};g!=null&&g!=""&&(g=h),typeof jQuery!="undefined"&&$(f).load(g,e)},addClass:function(d,c){typeof jQuery!="undefined"&&$(d).addClass(c)},removeClass:function(d,c){typeof jQuery!="undefined"&&$(d).removeClass(c)},attr:function(e,d,f){if(f!=null&&f!=""){typeof jQuery!="undefined"&&$(e).attr(d,f)}else{if(typeof jQuery!="undefined"){return $(e).attr(d)}}},prop:function(e,d,f){typeof jQuery=="undefined"||!/[1-9]\.[3-9].[1-9]/.test($.fn.jquery)?VMM.Element.attribute(e,d,f):$(e).prop(d,f)},attribute:function(e,d,f){if(f!=null&&f!=""){typeof jQuery!="undefined"&&$(e).attr(d,f)}else{if(typeof jQuery!="undefined"){return $(e).attr(d)}}},visible:function(d,c){if(c!=null){typeof jQuery!="undefined"&&(c?$(d).show(0):$(d).hide(0))}else{if(typeof jQuery!="undefined"){return $(d).is(":visible")?!0:!1}}},css:function(e,d,f){if(f!=null&&f!=""){typeof jQuery!="undefined"&&$(e).css(d,f)}else{if(typeof jQuery!="undefined"){return $(e).css(d)}}},cssmultiple:function(d,c){if(typeof jQuery!="undefined"){return $(d).css(c)}},offset:function(d){var c;return typeof jQuery!="undefined"&&(c=$(d).offset()),c},position:function(d){var c;return typeof jQuery!="undefined"&&(c=$(d).position()),c},width:function(d,c){if(c!=null&&c!=""){typeof jQuery!="undefined"&&$(d).width(c)}else{if(typeof jQuery!="undefined"){return $(d).width()}}},height:function(d,c){if(c!=null&&c!=""){typeof jQuery!="undefined"&&$(d).height(c)}else{if(typeof jQuery!="undefined"){return $(d).height()}}},toggleClass:function(d,c){typeof jQuery!="undefined"&&$(d).toggleClass(c)},each:function(d,c){typeof jQuery!="undefined"&&$(d).each(c)},html:function(e,d){var f;if(typeof jQuery!="undefined"){return f=$(e).html(),f}if(d!=null&&d!=""){typeof jQuery!="undefined"&&$(e).html(d)}else{var f;if(typeof jQuery!="undefined"){return f=$(e).html(),f}}},find:function(d,c){if(typeof jQuery!="undefined"){return $(d).find(c)}},stop:function(b){typeof jQuery!="undefined"&&$(b).stop()},animate:function(u,s,r,q,p){var o="easein",n=1000,m={};s!=null&&(s<1?n=1:n=Math.round(s)),r!=null&&r!=""&&(o=r),q!=null?m=q:m={opacity:0};if(VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet"){var l=Math.round(n/1500*10)/10,k=l+"s";VMM.Element.css(u,"-webkit-transition","all "+k+" ease"),VMM.Element.css(u,"-moz-transition","all "+k+" ease"),VMM.Element.css(u,"-o-transition","all "+k+" ease"),VMM.Element.css(u,"-ms-transition","all "+k+" ease"),VMM.Element.css(u,"transition","all "+k+" ease"),VMM.Element.cssmultiple(u,m)}else{typeof jQuery!="undefined"&&(p!=null&&p!=""?$(u).animate(m,{queue:!1,duration:n,easing:o,complete:p}):$(u).animate(m,{queue:!1,duration:n,easing:o}))}}}.init(),VMM.TouchSlider={createPanel:function(i,h,n,m,l,k){VMM.TouchSlider.vertical=!1,VMM.TouchSlider.vertical=l;var j=m;VMM.TouchSlider.width=n,VMM.TouchSlider.height=k,VMM.TouchSlider.makeTouchable(i,h)},removePanel:function(b){VMM.unbindEvent(b,VMM.TouchSlider.onTouchStart,"touchstart"),VMM.unbindEvent(b,VMM.TouchSlider.onTouchMove,"touchmove"),VMM.unbindEvent(b,VMM.TouchSlider.onTouchEnd,"touchend")},makeTouchable:function(d,c){VMM.bindEvent(d,VMM.TouchSlider.onTouchStart,"touchstart",{element:c}),VMM.bindEvent(d,VMM.TouchSlider.onTouchMove,"touchmove",{element:c}),VMM.bindEvent(d,VMM.TouchSlider.onTouchEnd,"touchend",{element:c})},onTouchStart:function(b){return VMM.TouchSlider.touchStart(b.data.element,b),b.preventDefault(),b.stopPropagation(),!0},onTouchEnd:function(b){return b.preventDefault(),b.stopPropagation(),VMM.TouchSlider.sliding?(VMM.TouchSlider.sliding=!1,VMM.TouchSlider.touchEnd(b.data.element,b),!1):!0},onTouchMove:function(b){return VMM.TouchSlider.touchMove(b.data.element,b),b.preventDefault(),b.stopPropagation(),!1},getLeft:function(b){return parseInt(VMM.Element.css(b,"left").substring(0,VMM.Element.css(b,"left").length-2),10)},getTop:function(b){return parseInt(VMM.Element.css(b,"top").substring(0,VMM.Element.css(b,"top").length-2),10)},touchStart:function(d,c){VMM.Element.css(d,"-webkit-transition-duration","0"),VMM.TouchSlider.startX=c.originalEvent.touches[0].screenX,VMM.TouchSlider.startY=c.originalEvent.touches[0].screenY,VMM.TouchSlider.startLeft=VMM.TouchSlider.getLeft(d),VMM.TouchSlider.startTop=VMM.TouchSlider.getTop(d),VMM.TouchSlider.touchStartTime=(new Date).getTime()},touchEnd:function(d,c){VMM.TouchSlider.getLeft(d)>0?(VMM.TouchSlider.vertical?VMM.Element.animate(d,1000,"",{top:0}):VMM.Element.animate(d,1000,"",{left:0}),VMM.TouchSlider.startX=null,VMM.TouchSlider.startY=null,VMM.fireEvent(d,"TOUCHUPDATE",[0])):VMM.TouchSlider.slideMomentum(d,c)},slideMomentum:function(A,z){var y=((new Date).getTime()-VMM.TouchSlider.touchStartTime)*10,x=y,w=VMM.TouchSlider.getLeft(A),v=VMM.TouchSlider.getTop(A),u=6000*(Math.abs(VMM.TouchSlider.startLeft)-Math.abs(w)),s=6000*(Math.abs(VMM.TouchSlider.startTop)-Math.abs(v));y=Math.round(u/y),slideAdjustY=Math.round(s/y);var r=y+w,q=slideAdjustY+v,p=q%VMM.TouchSlider.height,o=r%VMM.TouchSlider.width,n={top:Math.min(0,q),left:Math.min(0,r),time:x};VMM.fireEvent(A,"TOUCHUPDATE",[n]),VMM.TouchSlider.startX=null,VMM.TouchSlider.startY=null},doSlide:function(e,d,f){VMM.Element.css(e,"-webkit-transition-property","left"),VMM.Element.css(e,"-webkit-transition-duration",f),VMM.Element.css(e,"left",d)},touchMove:function(f,e){!!VMM.TouchSlider.sliding,VMM.TouchSlider.sliding=!0;if(VMM.TouchSlider.vertical){if(VMM.TouchSlider.startY>e.originalEvent.touches[0].screenY){VMM.Element.css(f,"top",-(VMM.TouchSlider.startY-e.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),VMM.TouchSlider.slidingTop=!0}else{var h=e.originalEvent.touches[0].screenY-VMM.TouchSlider.startY+VMM.TouchSlider.startTop;VMM.Element.css(f,"top",-(VMM.TouchSlider.startY-e.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),VMM.TouchSlider.slidingTop=!1}}else{if(VMM.TouchSlider.startX>e.originalEvent.touches[0].screenX){VMM.Element.css(f,"left",-(VMM.TouchSlider.startX-e.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=!0}else{var g=e.originalEvent.touches[0].screenX-VMM.TouchSlider.startX+VMM.TouchSlider.startLeft;VMM.Element.css(f,"left",-(VMM.TouchSlider.startX-e.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=!1}}}},VMM.hideUrlBar=function(){var f=window,e=f.document;if(!location.hash||!f.addEventListener){window.scrollTo(0,1);var h=1,g=setInterval(function(){e.body&&(clearInterval(g),h="scrollTop" in e.body?e.body.scrollTop:1,f.scrollTo(0,h===1?0:1))},15);f.addEventListener("load",function(){setTimeout(function(){f.scrollTo(0,h===1?0:1)},0)},!1)}},VMM.DragSlider={createPanel:function(h,g,l,k,j){var i=k;VMM.DragSlider.width=l,VMM.DragSlider.makeDraggable(h,g),VMM.DragSlider.drag_elem=h,VMM.DragSlider.sticky=j},makeDraggable:function(d,c){VMM.bindEvent(d,VMM.DragSlider.onDragStart,"mousedown",{element:c,delement:d}),VMM.bindEvent(d,VMM.DragSlider.onDragEnd,"mouseup",{element:c,delement:d}),VMM.bindEvent(d,VMM.DragSlider.onDragLeave,"mouseleave",{element:c,delement:d})},cancelSlide:function(b){return VMM.unbindEvent(VMM.DragSlider.drag_elem,VMM.DragSlider.onDragMove,"mousemove"),!0},onDragLeave:function(b){return VMM.unbindEvent(b.data.delement,VMM.DragSlider.onDragMove,"mousemove"),b.preventDefault(),b.stopPropagation(),!0},onDragStart:function(b){return VMM.DragSlider.dragStart(b.data.element,b.data.delement,b),b.preventDefault(),b.stopPropagation(),!0},onDragEnd:function(b){return b.preventDefault(),b.stopPropagation(),VMM.DragSlider.sliding?(VMM.DragSlider.sliding=!1,VMM.DragSlider.dragEnd(b.data.element,b.data.delement,b),!1):!0},onDragMove:function(b){return VMM.DragSlider.dragMove(b.data.element,b),b.preventDefault(),b.stopPropagation(),!1},dragStart:function(f,e,h){VMM.DragSlider.startX=h.pageX,VMM.DragSlider.startLeft=VMM.DragSlider.getLeft(f),VMM.DragSlider.dragStartTime=(new Date).getTime(),VMM.DragSlider.dragWidth=VMM.Element.width(e);var g=Math.round(VMM.DragSlider.startX-h.pageX-VMM.DragSlider.startLeft);VMM.Element.stop(f),VMM.bindEvent(e,VMM.DragSlider.onDragMove,"mousemove",{element:f})},dragEnd:function(e,d,f){VMM.unbindEvent(d,VMM.DragSlider.onDragMove,"mousemove"),VMM.DragSlider.getLeft(e)>0||VMM.DragSlider.dragMomentum(e,f)},dragMove:function(e,d){!!VMM.DragSlider.sliding,VMM.DragSlider.sliding=!0;if(VMM.DragSlider.startX>d.pageX){VMM.Element.css(e,"left",-(VMM.DragSlider.startX-d.pageX-VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!0}else{var f=d.pageX-VMM.DragSlider.startX+VMM.DragSlider.startLeft;VMM.Element.css(e,"left",-(VMM.DragSlider.startX-d.pageX-VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!1}},dragMomentum:function(u,s){var r=((new Date).getTime()-VMM.DragSlider.dragStartTime)*10,q=r,p=VMM.DragSlider.getLeft(u),o=6000*(Math.abs(VMM.DragSlider.startLeft)-Math.abs(p));r=Math.round(o/r);var n=p+r,m=n%VMM.DragSlider.width,l={left:Math.min(n),time:q};VMM.fireEvent(u,"DRAGUPDATE",[l]);var k="easeOutExpo";l.time>0&&VMM.Element.animate(u,l.time,k,{left:l.left})},getLeft:function(b){return parseInt(VMM.Element.css(b,"left").substring(0,VMM.Element.css(b,"left").length-2),10)}},VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS",this.device=this.searchDevice(navigator.userAgent)},searchDevice:function(b){return b.match(/Android/i)||b.match(/iPhone|iPod/i)?"mobile":b.match(/iPad/i)?"tablet":b.match(/BlackBerry/i)||b.match(/IEMobile/i)?"other mobile":"desktop"},searchString:function(f){for(var e=0;e<f.length;e++){var h=f[e].string,g=f[e].prop;this.versionSearchString=f[e].versionSearch||f[e].identity;if(h){if(h.indexOf(f[e].subString)!=-1){return f[e].identity}}else{if(g){return f[e].identity}}}},searchVersion:function(d){var c=d.indexOf(this.versionSearchString);if(c==-1){return}return parseFloat(d.substring(c+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},VMM.Browser.init(),VMM.MediaElement={init:function(){return this},thumbnail:function(g,f,j){_w=32,_h=32,f!=null&&f!=""&&(_w=f),j!=null&&j!=""&&(_h=j);if(g.media!=null&&g.media!=""){_valid=!0;var i="",h={};return h=VMM.MediaType(g.media),h.type=="image"?(i="<div class='thumbnail'><img src='"+h.id+"' width='"+_w+"px' height='"+_h+"px'></div>",i):h.type=="flickr"?(i="<div class='thumbnail'><img id='flickr_"+h.id+"_thumb' width='"+_w+"px' height='"+_h+"px'></div>",i):h.type=="youtube"?(i="<div class='thumbnail youtube'></div>",i):h.type=="vimeo"?(i="<div class='thumbnail vimeo'></div>",i):h.type=="twitter"?(i="<div class='thumbnail twitter'></div>",i):h.type=="twitter-ready"?(i="<div class='thumbnail twitter'></div>",i):h.type=="soundcloud"?(i="<div class='thumbnail soundcloud'></div>",i):h.type=="google-map"?(i="<div class='thumbnail map'></div>",i):h.type=="unknown"?(i="",i):h.type=="website"?(i="<div class='thumbnail website'></div>",i):(i="<div class='thumbnail'></div>",i)}},create:function(C,B,A,z,y){_return=A,_w=500,_h=400,$mediacontainer=C;var x=!1;z!=null&&z!=""&&(_w=z),y!=null&&y!=""&&(_h=y);if(B.media!=null&&B.media!=""){x=!0;var w="",v="",u="",s={},r=_h-50,q=!1;B.credit!=null&&B.credit!=""&&(u="<div class='credit'>"+B.credit+"</div>"),B.caption!=null&&B.caption!=""&&(v="<div class='caption'>"+B.caption+"</div>"),s=VMM.MediaType(B.media);if(s.type=="image"){w="<img src='"+s.id+"'>"}else{if(s.type=="flickr"){var p="flickr_"+s.id;w="<img id='"+p+"_large'>",VMM.ExternalAPI.flickr.getPhoto(s.id,"#"+p)}else{if(s.type=="youtube"){w="<div class='media-frame video youtube' id='youtube_"+s.id+"'>Loading YouTube video...</div>",VMM.ExternalAPI.youtube.init(s.id)}else{if(s.type=="vimeo"){w="<iframe class='media-frame video vimeo' frameborder='0' width='100%' height='100%' src='http://player.vimeo.com/video/"+s.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'></iframe>"}else{if(s.type=="twitter"){w="<div class='twitter' id='"+s.id+"'>Loading Tweet</div>",trace("TWITTER"),VMM.ExternalAPI.twitter.prettyHTML(s.id),q=!0}else{if(s.type=="twitter-ready"){w=s.id}else{if(s.type=="soundcloud"){var o="soundcloud_"+VMM.Util.unique_ID(5);w="<div class='media-frame soundcloud' id='"+o+"'>Loading Sound</div>",VMM.ExternalAPI.soundcloud.getSound(s.id,o)}else{s.type=="google-map"?w="<iframe class='media-frame map' frameborder='0' width='100%' height='100%' scrolling='no' marginheight='0' marginwidth='0' src='"+s.id+"&amp;output=embed'></iframe>":s.type=="unknown"?(trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML"),w=VMM.Util.properQuotes(s.id)):s.type=="website"?w="<iframe class='media-frame' frameborder='0' width='100%' height='100%' scrolling='yes' marginheight='0' marginwidth='0' src='"+s.id+"'></iframe>":(trace("NO KNOWN MEDIA TYPE FOUND"),trace(s.type))}}}}}}}w="<div class='media-container' >"+w+u+v+"</div>";if(_return){return q?"<div class='media text-media'><div class='media-wrapper'>"+w+"</div></div>":"<div class='media'><div class='media-wrapper'>"+w+"</div></div>"}VMM.appendElement($mediacontainer,w),VMM.appendElement($mediacontainer,u),VMM.appendElement($mediacontainer,v)}}}.init(),VMM.MediaType=function(e){var d=!1,f={};return e.match("div class='twitter'")?(f.type="twitter-ready",f.id=e,d=!0):e.match("(www.)?youtube|youtu.be")?(e.match("embed")?youtube_id=e.split(/embed\//)[1].split('"')[0]:youtube_id=e.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],f.type="youtube",f.id=youtube_id,d=!0):e.match("(player.)?vimeo.com")?(vimeo_id=e.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],f.type="vimeo",f.id=vimeo_id,d=!0):e.match("(player.)?soundcloud.com")?(f.type="soundcloud",f.id=e,d=!0):e.match("(www.)?twitter.com")?(trace("TWITTER MATCH"),e.match("status/")?twitter_id=e.split("status/")[1]:e.match("statuses/")?twitter_id=e.split("statuses/")[1]:twitter_id="",f.type="twitter",f.id=twitter_id,d=!0):e.match("maps.google.com")?(f.type="google-map",f.id=e.split(/src=['|"][^'|"]*?['|"]/gi),trace("google map "+f.id),d=!0):e.match("flickr.com/photos")?(f.type="flickr",f.id=e.split("photos/")[1].split("/")[1],trace("FLICKR "+f.id),d=!0):e.match(/jpg|jpeg|png|gif/i)?(f.type="image",f.id=e,d=!0):e.indexOf("http://")==0?(f.type="website",f.id=e,d=!0):(trace("unknown media"),f.type="unknown",f.id=e,d=!0),d?f:(trace("No valid media id detected"),trace(e),!1)},VMM.Keys={flickr:"6d6f59d8d30d79f4f402a7644d5073e3"},VMM.ExternalAPI={twitter:{tweetArray:[],getHTML:function(d){var c="https://api.twitter.com/1/statuses/oembed.json?id="+d+"&callback=?";VMM.getJSON(c,function(a){VMM.ExternalAPI.twitter.onJSONLoaded(a,d)})},onJSONLoaded:function(d,c){VMM.attachElement("#"+c,VMM.ExternalAPI.twitter.linkify(d.html))},linkify:function(b){return b.replace(/[@]+[A-Za-z0-9-_]+/g,function(d){var c=d.replace("@","");return d.link("http://twitter.com/"+c)})},parseTwitterDate:function(d){var c=new Date(Date.parse(d));return c},prettyParseTwitterDate:function(d){var c=new Date(Date.parse(d));return VMM.Util.date.prettyDate(c,!0)},getTweets:function(h){var g=[],l=h.length;for(var k=0;k<h.length;k++){var j="";h[k].tweet.match("status/")?j=h[k].tweet.split("status/")[1]:h[k].tweet.match("statuses/")?j=h[k].tweet.split("statuses/")[1]:j="";var i="https://api.twitter.com/1/statuses/show.json?id="+j+"&include_entities=true&callback=?";VMM.getJSON(i,function(b){var o={},n="<div class='twitter'><blockquote><p>",m=VMM.Util.linkify(b.text);m=m.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),m=m.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),n+=m,n+="</p>",n+="\u2014 "+b.user.name+" (<a href='https://twitter.com/"+b.user.screen_name+"'>@"+b.user.screen_name+"</a>) <a href='https://twitter.com/"+b.user.screen_name+"/status/"+b.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(b.created_at)+" </a></blockquote></div>",o.content=n,o.raw=b,g.push(o);if(g.length==l){var c={tweetdata:g};VMM.fireEvent(global,"TWEETSLOADED",c)}})}},getTweetSearch:function(g,f){var j=40;f!=null&&f!=""&&(j=f);var i="http://search.twitter.com/search.json?q="+g+"&rpp="+j+"&include_entities=true&result_type=mixed",h=[];VMM.getJSON(i,function(k){for(var e=0;e<k.results.length;e++){var o={},n="<div class='twitter'><blockquote><p>",m=VMM.Util.linkify(k.results[e].text);m=m.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),m=m.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),n+=m,n+="</p>",n+="\u2014 "+k.results[e].from_user_name+" (<a href='https://twitter.com/"+k.results[e].from_user+"'>@"+k.results[e].from_user+"</a>) <a href='https://twitter.com/"+k.results[e].from_user+"/status/"+k.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(k.results[e].created_at)+" </a></blockquote></div>",o.content=n,o.raw=k.results[e],h.push(o)}var l={tweetdata:h};VMM.fireEvent(global,"TWEETSLOADED",l)})},prettyHTML:function(d){var c="https://api.twitter.com/1/statuses/show.json?id="+d+"&include_entities=true&callback=?";VMM.getJSON(c,function(a){VMM.ExternalAPI.twitter.formatJSON(a,d)})},formatJSON:function(f,e){var h="<blockquote><p>",g=VMM.Util.linkify(f.text);g=g.replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2'>$1</a>"),g=g.replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2'>$1</a>"),h+=g,h+="</p></blockquote>",h+=" <a href='https://twitter.com/"+f.user.screen_name+"/status/"+f.id+"' alt='link to original tweet' title='link to original tweet'><span class='created-at'></span> </a>",h+="<div class='vcard author'>",h+="<a class='screen-name url' href='https://twitter.com/"+f.user.screen_name+"' data-screen-name='"+f.user.screen_name+"'>",h+="<span class='avatar'><img src=' "+f.user.profile_image_url+"'  alt=''></span>",h+="<span class='fn'>"+f.user.name+"</span>",h+="<span class='nickname'>@"+f.user.screen_name+"</span>",h+="</a>",h+="</div>",VMM.attachElement("#"+e,h)}},maps:{},flickr:{getPhoto:function(e,d){var f="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+VMM.Keys.flickr+"&photo_id="+e+"&format=json&nojsoncallback=1";VMM.getJSON(f,function(b){var j=d+"_large",i=d+"_thumb",h=b.sizes.size[b.sizes.size.length-1].source,g=b.sizes.size[0].source;VMM.Element.attr(j,"src",h),VMM.Element.attr(i,"src",g)})}},soundcloud:{getSound:function(e,d){var f="http://soundcloud.com/oembed?iframe=true&url="+e+"";VMM.getJSON(f,function(b){VMM.attachElement("#"+d,b.html)})}},youtube:{init:function(e){if(VMM.master_config.youtube.active){VMM.master_config.youtube.createPlayer(e)}else{VMM.master_config.youtube.que.push(e);if(!VMM.master_config.youtube.api_loaded){var d=document.createElement("script");d.src="http://www.youtube.com/player_api";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(d,f),VMM.master_config.youtube.api_loaded=!0}}},onAPIReady:function(){VMM.master_config.youtube.active=!0;for(var b=0;b<VMM.master_config.youtube.que.length;b++){VMM.ExternalAPI.youtube.createPlayer(VMM.master_config.youtube.que[b])}},createPlayer:function(d){var c={active:!1,player:{},name:"youtube_"+d,playing:!1};c.player["youtube_"+d]=new YT.Player("youtube_"+d,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",rel:0,origin:"http://dev.verite.co"},videoId:d,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}}),VMM.master_config.youtube.array.push(c)},stopPlayers:function(){for(var d=0;d<VMM.master_config.youtube.array.length;d++){if(VMM.master_config.youtube.array[d].playing){var c=VMM.master_config.youtube.array[d].name;VMM.master_config.youtube.array[d].player[c].stopVideo()}}},onStateChange:function(e){for(var d=0;d<VMM.master_config.youtube.array.length;d++){var f=VMM.master_config.youtube.array[d].name;VMM.master_config.youtube.array[d].player[f]==e.target&&e.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[d].playing=!0)}},onPlayerReady:function(b){}}},VMM.Media=function(C,B,A,z){function o(){}var y={},x=!1,w={width:720,height:400,content_width:720,content_height:400,ease:"easeInOutExpo",duration:1000,spacing:15},v="",u="",s="",r="",q=C;B!=null&&B!=""&&(w.width=B),A!=null&&A!=""&&(w.height=A),this.init=function(b){typeof b!="undefined"?this.setData(b):trace("WAITING ON DATA")};var p=function(f,e,h){v=VMM.appendAndGetElement(q,"<div>","media"),u=VMM.appendAndGetElement(v,"<div>","container"),s=VMM.appendAndGetElement(u,"<div>","media-container");if(y.media!=null&&y.media!=""){x=!0;var g={};g=VMM.MediaType(y.media),g.type=="image"?VMM.appendElement(s,"<img src='"+g.id+"'>"):g.type=="youtube"?VMM.appendElement(s,"<iframe frameborder='0' src='http://www.youtube.com/embed/"+g.id+"?&rel=0&theme=light&showinfo=0&hd=1&autohide=0&color=white' allowfullscreen>"):g.type=="vimeo"&&VMM.appendElement(s,"<iframe frameborder='0' src='http://player.vimeo.com/video/"+g.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'>"),y.credit!=null&&y.credit!=""&&VMM.appendElement(u,VMM.createElement("div",y.credit,"credit")),y.caption!=null&&y.caption!=""&&VMM.appendElement(u,VMM.createElement("div",y.caption,"caption"))}};this.setData=function(b){typeof b!="undefined"?(y=b,p()):trace("NO DATA")}},VMM.Media.prototype.height=function(b){if(b==null||b==""){return config.height}config.height=b,reSize()},VMM.Media.prototype.width=function(b){if(b==null||b==""){return config.width}config.width=b,reSize()},VMM.Media.prototype.getData=function(){return data},VMM.Media.prototype.setConfig=function(b){typeof b!="undefined"?config=b:trace("NO CONFIG DATA")},VMM.Media.prototype.getConfig=function(){return config},VMM.Media.prototype.setSize=function(d,c){d!=null&&(config.width=d),c!=null&&(config.height=c),_active&&reSize()},VMM.Media.prototype.active=function(){return _active}}Date.prototype.getWeek=function(){var b=new Date(this.getFullYear(),0,1);return Math.ceil(((this-b)/86400000+b.getDay()+1)/7)},Date.prototype.getDayOfYear=function(){var b=new Date(this.getFullYear(),0,1);return Math.ceil((this-b)/86400000)};var is={Null:function(b){return b===null},Undefined:function(b){return b===undefined},nt:function(b){return b===null||b===undefined},Function:function(b){return typeof b=="function"?b.constructor.toString().match(/Function/)!==null:!1},String:function(b){return typeof b=="string"?!0:typeof b=="object"?b.constructor.toString().match(/string/i)!==null:!1},Array:function(b){return typeof b=="object"?b.constructor.toString().match(/array/i)!==null||b.length!==undefined:!1},Boolean:function(b){return typeof b=="boolean"?!0:typeof b=="object"?b.constructor.toString().match(/boolean/i)!==null:!1},Date:function(b){return typeof b=="date"?!0:typeof b=="object"?b.constructor.toString().match(/date/i)!==null:!1},HTML:function(b){return typeof b=="object"?b.constructor.toString().match(/html/i)!==null:!1},Number:function(b){return typeof b=="number"?!0:typeof b=="object"?b.constructor.toString().match(/Number/)!==null:!1},Object:function(b){return typeof b=="object"?b.constructor.toString().match(/object/i)!==null:!1},RegExp:function(b){return typeof b=="function"?b.constructor.toString().match(/regexp/i)!==null:!1}},type={of:function(d){for(var c in is){if(is[c](d)){return c.toLowerCase()}}}};typeof jQuery!="undefined"&&(jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(g,f,j,i,h){return jQuery.easing[jQuery.easing.def](g,f,j,i,h)},easeInExpo:function(g,f,j,i,h){return f==0?j:i*Math.pow(2,10*(f/h-1))+j},easeOutExpo:function(g,f,j,i,h){return f==h?j+i:i*(-Math.pow(2,-10*f/h)+1)+j},easeInOutExpo:function(g,f,j,i,h){return f==0?j:f==h?j+i:(f/=h/2)<1?i/2*Math.pow(2,10*(f-1))+j:i/2*(-Math.pow(2,-10*--f)+2)+j},easeInQuad:function(g,f,j,i,h){return i*(f/=h)*f+j},easeOutQuad:function(g,f,j,i,h){return -i*(f/=h)*(f-2)+j},easeInOutQuad:function(g,f,j,i,h){return(f/=h/2)<1?i/2*f*f+j:-i/2*(--f*(f-2)-1)+j}})),typeof VMM!="undefined"&&typeof VMM.Sequence=="undefined"&&(VMM.Sequence=Class.extend({initialize:function(d,c){trace("sequence init"),this.increment=1,this.decrement=1,this.wrap=!1,this.length=d==null?0:d,this.index=c==null?d==0?-1:0:c>=d?d-1:c,this.synced=[]},setLength:function(b){this.length=b,this.setIndex(this.index)},getLength:function(){return this.length},setIndex:function(f){if(this.length<=0){this.index=-1;return}f<0?f=this.wrap?this.length-f%this.length:0:f>=this.length&&(f=this.wrap?f%this.length:this.length-1);var e=this.index;this.index=f;if(e!=this.index){for(var h=0;h<this.synced.length;h++){var g=this.synced[h];g.getIndex()!=this.index&&g.setIndex(this.index)}}},getIndex:function(){return this.index},next:function(){this.setIndex(this.index+this.increment)},prev:function(){this.setIndex(this.index-this.decrement)},sync:function(d,c){return d instanceof NYTMM.Sequence&&d!=this?(this.synced.push(d),c&&d.sync(this),!0):!1},unsync:function(e,d){for(var f=0;f<this.synced.length;f++){if(this.synced[f]==e){return this.synced.splice(f,1),d&&e.unsync(this),!0}}return !1}})),typeof VMM!="undefined"&&typeof VMM.Slider=="undefined"&&(VMM.Slider=function(aw,av,au,at){function X(){trace("onConfigSet")}function W(g,f){var j=!0,i=!1;g!=null&&(j=g),f!=null&&(i=f),ak=ah.width,ah.nav_height=VMM.Element.height(Z.prevBtnContainer),ah.content_width=ak-ah.content_padding*2,VMM.Element.width(aa,an.length*ah.content_width);if(i){var h=VMM.Element.position(an[al]);VMM.Element.css(ab,"left",h.left)}P(),VMM.Element.css(Z.nextBtn,"left",ak-ah.nav_width),VMM.Element.height(Z.prevBtn,ah.height),VMM.Element.height(Z.nextBtn,ah.height),VMM.Element.css(Z.nextBtnContainer,"top",ah.height/2-ah.nav_height/2),VMM.Element.css(Z.prevBtnContainer,"top",ah.height/2-ah.nav_height/2),VMM.Element.height(ac,ah.height),VMM.Element.width(ac,ak),j&&N(al,"linear",1),al==0&&VMM.Element.visible(Z.prevBtn,!1)}function V(b){al==an.length-1?VMM.Element.animate(ab,ah.duration,ah.ease,{left:-VMM.Element.position(an[al]).left}):(N(al+1),S())}function U(b){al==0?N(al):(N(al-1),S())}function T(g,f){if(ai.length==0){for(var j=0;j<an.length;j++){var i=VMM.Element.position(an[j]);ai.push(i.left)}}if(typeof f.left=="number"){var h=f.left;h<-VMM.Element.position(an[al]).left-ah.width/3?V():h>-VMM.Element.position(an[al]).left+ah.width/3?U():VMM.Element.animate(ab,ah.duration,ah.ease,{left:-VMM.Element.position(an[al]).left})}else{VMM.Element.animate(ab,ah.duration,ah.ease,{left:-VMM.Element.position(an[al]).left})}typeof f.top=="number"&&VMM.Element.animate(ab,ah.duration,ah.ease,{top:-f.top})}function S(){VMM.fireEvent(Y,"UPDATE")}var ar="private",aq={},ap=[],ao="",an=[],am=[],al=0,ak=960,aj={move:!1,x:10,y:0,off:0,dampen:48},ai=[],ah={interval:10,something:0,width:720,height:400,content_width:720,content_height:400,content_padding:130,ease:"easeInOutExpo",duration:1000,nav_width:100,nav_height:200,timeline:!1,spacing:15},ag=1000;av!=null&&av!=""&&(ah.width=av),au!=null&&au!=""&&(ah.height=au),at!=null&&at!=""&&(ah.timeline=at);var af="",ae=!1,ad="",ac="",ab="",aa="",Z={};Z.nextBtn,Z.prevBtn,Z.nextDate,Z.prevDate,Z.nextTitle,Z.prevTitle,this.ver="0.1";var Y=aw;this.init=function(b){typeof b!="undefined"?this.setData(b):trace("WAITING ON DATA")},this.width=function(b){if(b==null||b==""){return ah.width}ah.width=b,W()},this.height=function(b){if(b==null||b==""){return ah.height}ah.height=b,W()},this.setData=function(b){typeof b!="undefined"?(ap=b,L()):trace("NO DATA")},this.getData=function(){return ap},this.setConfig=function(b){typeof b!="undefined"?ah=b:trace("NO CONFIG DATA")},this.getConfig=function(){return ah},this.setSize=function(d,c){d!=null&&(ah.width=d),c!=null&&(ah.height=c),ae&&W()},this.active=function(){return ae},this.getCurrentNumber=function(){return al},this.setSlide=function(b){N(b)};var R=function(b){ap=b},Q=function(g){VMM.attachElement(aa,"");for(var f=0;f<g.length;f++){var j="",i,h;j=VMM.createElement("div",g[f].content,"content"),i=VMM.appendAndGetElement(aa,"<div>","slider-item",j),an.push(i)}},P=function(){VMM.Element.css(".slider-item","width",ah.content_width),VMM.Element.height(".slider-item",ah.height),VMM.Element.css(".slider-item .layout-text-media .media .media-container img","max-height",ah.height-50),VMM.Element.css(".slider-item .layout-media .media .media-container img","max-height",ah.height-150),VMM.Element.css(".slider-item .media .media-container .soundcloud","max-height",168);var h=Math.round(ah.height)-160,g=Math.round(h/9*16),l=ah.content_width/100*60,k=Math.round(l/16*9)+25;VMM.Element.height(".slider-item .media .media-container .media-frame",k),VMM.Element.width(".slider-item .media .media-container .media-frame",l),VMM.Element.height(".slider-item .layout-media .media .media-container .media-frame",h),VMM.Element.width(".slider-item .layout-media .media .media-container .media-frame",g),VMM.Element.height(".slider-item .layout-media .media .media-container .soundcloud",ah.height-150),VMM.Element.width(".slider-item .layout-media .media .media-container .soundcloud",ah.content_width),VMM.Element.width(".slider-item .layout-text-media .media .media-container .soundcloud",l),VMM.Element.height(".slider-item .media .media-container .map",h),VMM.Element.css(".slider-item .layout-text-media .media .media-container .media-frame","max-width",ah.content_width);var j=0;for(var i=0;i<an.length;i++){j=i*(ah.width+ah.spacing),VMM.Element.css(an[i],"left",j)}},O=function(e){var d="linear";for(var f=0;f<an.length;f++){f==al?VMM.Element.animate(an[f],ah.duration,d,{opacity:1}):f==al-1?VMM.Element.animate(an[f],ah.duration,d,{opacity:0.1}):f==al+1?VMM.Element.animate(an[f],ah.duration,d,{opacity:0.1}):VMM.Element.css(an[f],"opacity",e)}},N=function(u,s,r,q,p){VMM.ExternalAPI.youtube.stopPlayers(),al=u;var o=ah.ease,n=ah.duration,k=!1,i=!1;al==0&&(i=!0),al+1==an.length&&(k=!0),s!=null&&s!=""&&(o=s),r!=null&&r!=""&&(n=r);var g=VMM.Element.position(an[al]);i?VMM.Element.visible(Z.prevBtn,!1):(VMM.Element.visible(Z.prevBtn,!0),ah.timeline&&VMM.attachElement(Z.prevDate,ap[al-1].date),VMM.attachElement(Z.prevTitle,VMM.Util.unlinkify(ap[al-1].title))),k?VMM.Element.visible(Z.nextBtn,!1):(VMM.Element.visible(Z.nextBtn,!0),ah.timeline&&VMM.attachElement(Z.nextDate,ap[al+1].date),VMM.attachElement(Z.nextTitle,VMM.Util.unlinkify(ap[al+1].title))),q?VMM.Element.css(ab,"left",-(g.left-ah.content_padding)):(VMM.Element.stop(ab),VMM.Element.animate(ab,n,o,{left:-(g.left-ah.content_padding)})),p&&VMM.fireEvent(Y,"LOADED"),VMM.Element.height(an[al])>ah.height?VMM.Element.css(".slider","overflow-y","scroll"):(VMM.Element.css(Y,"overflow-y","hidden"),VMM.Element.animate(Y,n,o,{scrollTop:VMM.Element.prop(Y,"scrollHeight")-VMM.Element.height(Y)}))},M=function(){var b="<div class='icon'>&nbsp;</div>";Z.nextBtn=VMM.appendAndGetElement(ad,"<div>","nav-next"),Z.prevBtn=VMM.appendAndGetElement(ad,"<div>","nav-previous"),Z.nextBtnContainer=VMM.appendAndGetElement(Z.nextBtn,"<div>","nav-container",b),Z.prevBtnContainer=VMM.appendAndGetElement(Z.prevBtn,"<div>","nav-container",b),ah.timeline&&(Z.nextDate=VMM.appendAndGetElement(Z.nextBtnContainer,"<div>","date","1957"),Z.prevDate=VMM.appendAndGetElement(Z.prevBtnContainer,"<div>","date","1957")),Z.nextTitle=VMM.appendAndGetElement(Z.nextBtnContainer,"<div>","title","Title Goes Here"),Z.prevTitle=VMM.appendAndGetElement(Z.prevBtnContainer,"<div>","title","Title Goes Here"),VMM.bindEvent(".nav-next",V),VMM.bindEvent(".nav-previous",U)},L=function(){VMM.attachElement(Y,""),ad=VMM.getElement("div.slider"),ac=VMM.appendAndGetElement(ad,"<div>","slider-container-mask"),ab=VMM.appendAndGetElement(ac,"<div>","slider-container"),aa=VMM.appendAndGetElement(ab,"<div>","slider-item-container"),M(),Q(ap);var b=3000;VMM.Browser.device=="tablet"||VMM.Browser.device=="mobile"?(ah.duration=500,b=1000,VMM.TouchSlider.createPanel(ab,ab,VMM.Element.width(an[0]),ah.spacing,!0),VMM.bindEvent(ab,T,"TOUCHUPDATE")):VMM.Browser.device!="mobile",W(!1,!0),VMM.Element.visible(Z.prevBtn,!1),N(0,"easeOutExpo",b,!0,!0),ae=!0}}),typeof VMM!="undefined"&&typeof VMM.Util=="undefined"&&(VMM.Util={init:function(){return this},randomBetween:function(d,c){return Math.floor(Math.random()*(c-d+1)+d)},customSort:function(f,e){var h=f,g=e;return h==g?0:h>g?1:-1},number2money:function(g,f,j){var f=f!==null?f:!0,j=j!==null?j:!1,i=VMM.Math2.floatPrecision(g,2),h=this.niceNumber(i);return !h.split(/\./g)[1]&&j&&(h+=".00"),f&&(h="$"+h),h},wordCount:function(j){var i=j+" ",p=/^[^A-Za-z0-9\'\-]+/gi,o=i.replace(p,""),n=/[^A-Za-z0-9\'\-]+/gi,m=o.replace(n," "),l=m.split(" "),k=l.length-1;return i.length<2&&(k=0),k},parseDate:function(f){var e;if(f.match(/,/gi)){var h=f.split(",");for(var g=0;g<h.length;g++){h[g]=parseInt(h[g])}e=new Date,h[0]&&e.setFullYear(h[0]),h[1]>1?e.setMonth(h[1]-1):e.setMonth(0),h[2]>1?e.setDate(h[2]):e.setDate(1),h[3]>1?e.setHours(h[3]):e.setHours(0),h[4]>1?e.setMinutes(h[4]):e.setMinutes(0),h[5]>1?e.setSeconds(h[5]):e.setSeconds(0),h[6]>1?e.setMilliseconds(h[6]):e.setMilliseconds(0)}else{f.match("/")?e=new Date(f):f.length<5?(e=new Date,e.setFullYear(parseInt(f)),e.setMonth(0),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):e=new Date(parseInt(f.slice(0,4)),parseInt(f.slice(4,6))-1,parseInt(f.slice(6,8)),parseInt(f.slice(8,10)),parseInt(f.slice(10,12)))}return e},ratio:{r16_9:function(d,c){if(d!==null&&d!==""){return Math.round(c/16*9)}if(c!==null&&c!==""){return Math.round(d/9*16)}},r4_3:function(d,c){if(d!==null&&d!==""){return Math.round(c/4*3)}if(c!==null&&c!==""){return Math.round(d/3*4)}}},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],prettyDate:function(f,e,h){var g="";return type.of(f)=="date"?f.getMonth()===0&&f.getDate()==1&&f.getHours()===0&&f.getMinutes()===0?g=f.getFullYear():f.getDate()<=1&&f.getHours()===0&&f.getMinutes()===0?e?g=VMM.Util.date.month_abbr[f.getMonth()]:g=VMM.Util.date.month[f.getMonth()]+" "+f.getFullYear():f.getHours()===0&&f.getMinutes()===0?e?g=VMM.Util.date.month_abbr[f.getMonth()]+" "+f.getDate():g=VMM.Util.date.month[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear():f.getMinutes()===0?e?g=VMM.Util.date.get12HRTime(f):g=VMM.Util.date.get12HRTime(f)+"<br/><small>"+VMM.Util.date.month[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear()+" </small> ":e?g=VMM.Util.date.day[f.getDay()]+", "+VMM.Util.date.month_abbr[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear()+" at "+VMM.Util.date.get12HRTime(f):g=VMM.Util.date.get12HRTime(f)+"<br/><small>"+VMM.Util.date.day[f.getDay()]+", "+VMM.Util.date.month[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear()+" </small> ":(trace("NOT A VALID DATE?"),trace(f)),g},prettyMonth:function(e,d){var f="";return type.of(t)!="date",f},get12HRTime:function(e,d){var f="";return type.of(e)=="date"&&(f=VMM.Util.date.theHour(e.getHours())+":"+VMM.Util.date.minuteZeroFill(e.getMinutes()),d&&(f=f+":"+VMM.Util.date.minuteZeroFill(e.getSeconds())),f+=VMM.Util.date.hourSuffix(e.getHours())),f},theHour:function(b){return b>0&&b<13?b:b=="0"?(b=12,b):b===0?12:b-12},minuteZeroFill:function(b){return b>9?""+b:"0"+b},hourSuffix:function(b){return b<12?" am":" pm"}},doubledigit:function(b){return(b<10?"0":"")+b},truncateWords:function(u,s,r){s||(s=30),r||(r=s);var q=/^[^A-Za-z0-9\'\-]+/gi,p=u.replace(q,""),o=p.split(" "),n=[];s=Math.min(o.length,s),r=Math.min(o.length,r);for(var m=0;m<s;m++){n.push(o[m])}for(var l=s;m<r;m++){var k=o[m];n.push(k);if(k.charAt(k.length-1)=="."){break}}return n.join(" ")},linkify:function(e,d,f){return e?(e=e.replace(/((https?\:\/\/|ftp\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(b){var g=b,c="";return b.search("^https?://")<0&&(b="http://"+b),c="onclick = 'void(0)'",f&&(c="onclick = 'void(0)'"),onclick="void(0)",d===null||d===""?'<a href="'+b+" "+c+'">'+b+"</a>":"<a href='"+b+" "+c+" target='"+d+"'>'"+b+"</a>"}),e):e},unlinkify:function(b){return b?(b=b.replace(/<a\b[^>]*>/i,""),b=b.replace(/<\/a>/i,""),b):b},nl2br:function(b){return b.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(f){var e=function(b){return Math.floor(Math.random()*b)},h=function(){var b="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ";return b.substr(e(62),1)},g=function(i){var c="";for(var j=0;j<i;j++){c+=h()}return c};return g(f)},isEven:function(b){return b%2===0?!0:!1},getUrlVars:function(g){var f=[],j,i=g.slice(g.indexOf("?")+1).split("&");for(var h=0;h<i.length;h++){j=i[h].split("="),f.push(j[0]),f[j[0]]=j[1]}return trace(f),f},toHTML:function(b){return b=this.nl2br(b),b=this.linkify(b),b.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(f,e){e!==!1&&(e=!0);var h=(e?f.toLowerCase():f).split(" ");for(var g=0;g<h.length;g++){h[g]=h[g].substr(0,1).toUpperCase()+h[g].substr(1)}return h.join(" ")},properQuotes:function(b){return b.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},niceNumber:function(i){var h=String(Math.abs(Number(i))),n=h.split(/\./g)[0],m=h.split(/\./g)[1],l="",k=n.toArray();k.reverse();for(var j=1;j<=k.length;j++){j%3==0&&j<k.length?l=","+k[j-1]+l:l=k[j-1]+l}return m!=null&&m!=""&&m!=undefined?l+"."+m:l},toTitleCase:function(d){var c={__smallWords:["a","an","and","as","at","but","by","en","for","if","in","of","on","or","the","to","v[.]?","via","vs[.]?"],init:function(){this.__smallRE=this.__smallWords.join("|"),this.__lowerCaseWordsRE=new RegExp("\\b("+this.__smallRE+")\\b","gi"),this.__firstWordRE=new RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+this.__smallRE+")\\b","gi"),this.__lastWordRE=new RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(g){var f="",j=g.split(/([:.;?!][ ]|(?:[ ]|^)["â€œ])/);for(var i=0;i<j.length;++i){var h=j[i];h=h.replace(/\b([a-zA-Z][a-z.'â€™]*)\b/g,this.__titleCaseDottedWordReplacer),h=h.replace(this.__lowerCaseWordsRE,this.__lowerReplacer),h=h.replace(this.__firstWordRE,this.__firstToUpperCase),h=h.replace(this.__lastWordRE,this.__firstToUpperCase),f+=h}return f=f.replace(/ V(s?)\. /g," v$1. "),f=f.replace(/(['â€™])S\b/g,"$1s"),f=f.replace(/\b(AT&T|Q&A)\b/ig,this.__upperReplacer),f},__titleCaseDottedWordReplacer:function(b){return b.match(/[a-zA-Z][.][a-zA-Z]/)?b:c.__firstToUpperCase(b)},__lowerReplacer:function(b){return b.toLowerCase()},__upperReplacer:function(b){return b.toUpperCase()},__firstToUpperCase:function(f){var e=f.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);return e[1]=e[1].toUpperCase(),e.join("")}};return c.init(),d=d.replace(/_/g," "),d=c.toTitleCase(d),d}}.init()),!function(d){var c=function(f,e){this.init("tooltip",f,e)};c.prototype={constructor:c,init:function(a,j,i){var h,g;this.type=a,this.$element=d(j),this.options=this.getOptions(i),this.enabled=!0,this.options.trigger!="manual"&&(h=this.options.trigger=="hover"?"mouseenter":"focus",g=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(h,this.options.selector,d.proxy(this.enter,this)),this.$element.on(g,this.options.selector,d.proxy(this.leave,this))),this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(a){return a=d.extend({},d.fn[this.type].defaults,a,this.$element.data()),a.delay&&typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),a},enter:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);!e.options.delay||!e.options.delay.show?e.show():(e.hoverState="in",setTimeout(function(){e.hoverState=="in"&&e.show()},e.options.delay.show))},leave:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);!e.options.delay||!e.options.delay.hide?e.hide():(e.hoverState="out",setTimeout(function(){e.hoverState=="out"&&e.hide()},e.options.delay.hide))},show:function(){var i,h,n,m,l,k,j;if(this.hasContent()&&this.enabled){i=this.tip(),this.setContent(),this.options.animation&&i.addClass("fade"),k=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,h=/in/.test(k),i.remove().css({top:0,left:0,display:"block"}).appendTo(h?this.$element:document.body),n=this.getPosition(h),m=i[0].offsetWidth,l=i[0].offsetHeight;switch(h?k.split(" ")[1]:k){case"bottom":j={top:n.top+n.height,left:n.left+n.width/2-m/2};break;case"top":j={top:n.top-l,left:n.left+n.width/2-m/2};break;case"left":j={top:n.top+n.height/2-l/2,left:n.left-m};break;case"right":j={top:n.top+n.height/2-l/2,left:n.left+n.width}}i.css(j).addClass(k).addClass("in")}},setContent:function(){var b=this.tip();b.find(".tooltip-inner").html(this.getTitle()),b.removeClass("fade in top bottom left right")},hide:function(){function e(){var g=setTimeout(function(){f.off(d.support.transition.end).remove()},500);f.one(d.support.transition.end,function(){clearTimeout(g),f.remove()})}var a=this,f=this.tip();f.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?e():f.remove()},fixTitle:function(){var b=this.$element;(b.attr("title")||typeof b.attr("data-original-title")!="string")&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(a){return d.extend({},a?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var f,e=this.$element,g=this.options;return f=e.attr("data-original-title")||(typeof g.title=="function"?g.title.call(e[0]):g.title),f=f.toString().replace(/(^\s*|\s*$)/,""),f},tip:function(){return this.$tip=this.$tip||d(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},d.fn.tooltip=function(a){return this.each(function(){var h=d(this),g=h.data("tooltip"),b=typeof a=="object"&&a;g||h.data("tooltip",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.tooltip.Constructor=c,d.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),typeof VMM!="undefined"&&typeof VMM.Timeline=="undefined"&&(VMM.Timeline=function(aj,ai){function V(d,c){Z=c.timeline,type.of(Z.era)!="array"&&(Z.era=[]),L()}function U(){T()}function S(){P(),ad.setSize(X.feature_width,X.feature_height),ac.setSize(X.width,X.height),N()}function Q(b){X.loaded.slider=!0,O()}function O(b){X.loaded.percentloaded=X.loaded.percentloaded+25,H("Loading Timeline "+X.loaded.percentloaded),X.loaded.slider&&X.loaded.timenav&&G()}function M(b){X.loaded.timenav=!0,O()}function K(b){ac.setMarker(ad.getCurrentNumber(),X.ease,X.duration)}function J(b){ad.setSlide(ac.getCurrentNumber())}var ah=VMM.getElement("#timeline"),ag,af,ae=VMM.getElement("#timeline");ag=VMM.appendAndGetElement(ah,"<div>","feedback",""),af=VMM.appendAndGetElement(ag,"<div>","messege","Loading Timeline");var ad=new VMM.Slider("div.slider",720,400,!0),ac=new VMM.Timeline.TimeNav("div.navigation",720,400,!0),ab="private",aa={},Z={},Y=[],X={};X.interval=10,X.something=0,X.width=960,X.height=540,X.spacing=15,X.loaded={slider:!1,timenav:!1,percentloaded:0},X.ease="easeInOutExpo",X.duration=1000,aj!=null&&aj!=""?(X.width=aj,VMM.Element.width(ah,aj)):X.width=VMM.Element.width(ah),ai!=null&&ai!=""?(X.height=ai,VMM.Element.height(ah,ai)):X.height=VMM.Element.height(ah),VMM.Browser.device=="mobile"?(X.nav_width=X.width,X.nav_height=200,X.feature_width=X.width,X.feature_height=X.height):(X.nav_width=X.width,X.nav_height=200,X.feature_width=X.width,X.feature_height=X.height-X.nav_height);var W=!1;$.browser.msie&&parseInt($.browser.version,10)==7&&(W=!0),this.ver="0.85",this.init=function(b){trace("init"),VMM.bindEvent(global,V,"DATAREADY"),W?(ag=VMM.appendAndGetElement(ah,"<div>","feedback",""),af=VMM.appendAndGetElement(ag,"<div>","messege","Internet Explorer 7 is not supported by Timeline.")):(type.of(b)=="string"?VMM.Timeline.DataObj.getData(b):VMM.Timeline.DataObj.getData(ae),ag=VMM.appendAndGetElement(ah,"<div>","feedback",""),af=VMM.appendAndGetElement(ag,"<div>","messege","Loading Timeline"))},this.iframeLoaded=function(){trace("iframeLoaded")};var I=function(b){VMM.getJSON(b,function(c){Z=VMM.Timeline.DataObj.getData(c),VMM.fireEvent(global,"DATAREADY")})},H=function(b){},G=function(){VMM.Element.animate(ag,X.duration,X.ease*4,{opacity:0},F)},F=function(){VMM.Element.detach(ag)},T=function(){VMM.attachElement(ah,""),VMM.appendElement(ah,"<div class='container main'><div class='feature'><div class='slider'></div></div><div class='navigation'></div></div>"),S(),VMM.bindEvent("div.slider",Q,"LOADED"),VMM.bindEvent("div.navigation",M,"LOADED"),VMM.bindEvent("div.slider",K,"UPDATE"),VMM.bindEvent("div.navigation",J,"UPDATE"),ad.init(Y),ac.init(Y,Z.era),VMM.bindEvent(global,S,"resize"),VMM.bindEvent(global,function(b){b.preventDefault()},"touchmove")},R=function(r,q){P();var p=r,o="",n={};n._text="",n._media="";var m=!1,l=!1,k=!1;type.of(q)=="date"&&(m=!0,r.type!="start"&&(n._text+=VMM.createElement("h2",VMM.Util.date.prettyDate(q),"date")),p.headline!=null&&p.headline!=""&&p.type!="tweets"&&(r.type=="start"?n._text+=VMM.createElement("h2",p.headline,"start"):n._text+=VMM.createElement("h3",p.headline)),p.text!=null&&p.text!=""&&(k=!0,n._text+=VMM.createElement("p",p.text)),n._text=VMM.createElement("div",n._text,"container"),n._text=VMM.createElement("div",n._text,"text")),m&&p.asset!=null&&p.asset!=""&&p.asset.media!=null&&p.asset.media!=""&&(l=!0,n._media=VMM.MediaElement.create("",p.asset,!0,X.feature_width,X.feature_height));if(m){var j="content-container layout";k&&(j+="-text"),l&&(j+="-media"),o=VMM.createElement("div",n._text+n._media,j)}return o},P=function(){X.width=VMM.Element.width(ah),X.height=VMM.Element.height(ah),X.nav_width=X.width,X.feature_width=X.width,VMM.Browser.device=="mobile"?X.feature_height=X.height:X.feature_height=X.height-X.nav_height-3},N=function(){X.width<500?(VMM.Element.hide("div.navigation"),VMM.Element.hide("div.nav-next"),VMM.Element.hide("div.nav-previous"),VMM.Element.height(".slider-container-mask",X.height)):(VMM.Element.show("div.navigation"),VMM.Element.show("div.nav-next"),VMM.Element.show("div.nav-previous"),VMM.Element.height(".slider-container-mask",X.feature_height)),X.width<820&&!(X.width<500)},L=function(){P();if(Z.headline!=null&&Z.headline!=""&&Z.text!=null&&Z.text!=""){trace("HAS STARTPAGE");var d={};Z.type=="google spreadsheet"?(trace("google spreadsheet startpage date"+Z.startDate),d.startdate=new Date(Date.parse(Z.startDate)),trace(d.startdate)):d.startdate=VMM.Util.parseDate(Z.startDate),d.uniqueid=VMM.Util.unique_ID(5),d.enddate=d.startdate,d.title=Z.headline,d.headline=Z.headline,d.text=Z.text,d.type="start",d.date=VMM.Util.date.prettyDate(Z.startDate),d.asset=Z.asset,d.fulldate=d.startdate.getTime(),d.content=R(d,d.startdate),d.content!=null&&d.content!=""&&Y.push(d)}for(var c=0;c<Z.date.length;c++){if(Z.date[c].startDate!=null&&Z.date[c].startDate!=""){var d={};Z.date[c].type=="tweets"?d.startdate=VMM.ExternalAPI.twitter.parseTwitterDate(Z.date[c].startDate):Z.date[c].type=="google spreadsheet"?(d.startdate=new Date(Date.parse(Z.date[c].startDate)),trace(d.startdate)):d.startdate=VMM.Util.parseDate(Z.date[c].startDate),d.uniqueid=Z.date[c].startDate.toString()+"-"+c.toString(),Z.date[c].endDate!=null&&Z.date[c].endDate!=""?Z.date[c].type=="tweets"?d.enddate=VMM.ExternalAPI.twitter.parseTwitterDate(Z.date[c].endDate):Z.date[c].type=="google spreadsheet"?d.enddate=new Date(Date.parse(Z.date[c].endDate)):d.enddate=VMM.Util.parseDate(Z.date[c].endDate):d.enddate=d.startdate,d.title=Z.date[c].headline,d.type=Z.date[c].type,d.date=VMM.Util.date.prettyDate(d.startdate),d.asset=Z.date[c].asset,d.fulldate=d.startdate.getTime(),d.content=R(Z.date[c],d.startdate),d.content!=null&&d.content!=""&&Y.push(d)}}Y.sort(function(f,e){return f.fulldate-e.fulldate}),U()}},VMM.Timeline.TimeNav=function(a1,a0,aZ){function ar(){trace("onConfigSet")}function aq(b){VMM.Element.css(az,"left",Math.round(aK.width/2)+2),ab(aR,aK.ease,aK.duration,!0,b)}function ap(){VMM.fireEvent(at,"UPDATE")}function ao(){trace("CLICK"),VMM.DragSlider.cancelSlide(),aK.multiplier>aK.min_multiplier&&(aK.multiplier=aK.multiplier-1,aK.multiplier<0&&(aK.multiplier=aK.min_multiplier),aB())}function an(){trace("CLICK"),VMM.DragSlider.cancelSlide(),aK.multiplier<aK.max_multiplier&&(aK.multiplier=aK.multiplier+1,aK.multiplier!=aK.max_multiplier,aB())}function am(b){VMM.DragSlider.cancelSlide(),ab(0),ap()}function al(b){VMM.DragSlider.cancelSlide(),ab(b.data.number),ap()}function ak(b){VMM.Element.toggleClass(b.data.elem,"zFront")}function aj(d,c){VMM.Element.animate(aI,c.time/2,aK.ease,{left:c.left})}trace("VMM.Timeline.TimeNav");var aY={},aX=[],aW,aV=[],aU=[],aT=[],aS={},aR=0,aQ=!1,aP={day:24,month:12,year:10,hour:60,minute:60,second:1000,decade:10,century:100,millenium:1000,week:4.34812141,days_in_month:30.4368499,days_in_week:7,weeks_in_month:4.34812141,weeks_in_year:52.177457,days_in_year:365.242199,hours_in_day:24},aO={day:86400000,week:7,month:30.4166666667,year:12,hour:24,minute:1440,second:86400,decade:10,century:100,millenium:1000},aN={type:"year",number:10,first:1970,last:2011,multiplier:100},aM={type:"year",number:10,first:1970,last:2011,multiplier:100},aL={day:{},month:{},year:{},hour:{},minute:{},second:{},decade:{},century:{},millenium:{},week:{}},aK={interval:10,something:0,width:900,height:150,ease:"easeInOutExpo",duration:1000,nav_width:100,nav_height:200,timeline:!1,spacing:15,marker_width:150,marker_height:48,density:2,timeline_width:900,interval_width:200,rows:[1,1,1],multiplier:6,max_multiplier:16,min_multiplier:1,has_start_page:!1};aK.rows=[aK.marker_height,aK.marker_height*2,1],a0!=null&&a0!=""&&(aK.width=a0),aZ!=null&&aZ!=""&&(aK.height=aZ);var aJ="",aQ=!1,aI="",aH="",aG="",aF="",aE="",aD="",aC="",aA="",az="",ay="",ax="",aw="",av="",au={};au.nextBtn,au.prevBtn,au.nextDate,au.prevDate,au.nextTitle,au.prevTitle,this.ver="0.1";var at=a1;this.init=function(d,c){trace("VMM.Timeline.TimeNav init"),typeof d!="undefined"?this.setData(d,c):trace("WAITING ON DATA")},this.setData=function(d,c){typeof d!="undefined"?(aX=d,aW=c,aa()):trace("NO DATA")},this.setSize=function(d,c){d!=null&&(aK.width=d),c!=null&&(aK.height=c),aQ&&aq()},this.setMarker=function(f,e,h,g){ab(f,e,h)},this.getCurrentNumber=function(){return aR};var ai=function(){var B=2,A=0,z=0;for(var y=0;y<aX.length;y++){var x="",w,v,u,r,h,g;w=VMM.appendAndGetElement(aH,"<div>","marker"),v=VMM.appendAndGetElement(w,"<div>","flag"),u=VMM.appendAndGetElement(v,"<div>","flag-content"),r=VMM.appendAndGetElement(w,"<div>","dot"),h=VMM.appendAndGetElement(w,"<div>","line"),g=VMM.appendAndGetElement(h,"<div>","event-line"),aX[y].asset!=null&&aX[y].asset!=""&&VMM.appendElement(u,VMM.MediaElement.thumbnail(aX[y].asset,32,32)),VMM.appendElement(u,"<h3>"+VMM.Util.unlinkify(aX[y].title)+"</h3><h4>"+aX[y].date+"</h4>"),VMM.Element.attr(w,"id",aX[y].uniqueid.toString()),VMM.bindEvent(v,al,"",{number:y}),VMM.bindEvent(v,ak,"mouseenter mouseleave",{number:y,elem:v});var f={marker:w,flag:v,lineevent:g,type:"marker"};aX[y].type=="start"&&(trace("BUILD MARKER HAS START PAGE"),aK.has_start_page=!0,f.type="start"),aU.push(f)}for(var e=0;e<aW.length;e++){var x="",C={content:"",startdate:"",enddate:"",headline:"",uniqueid:"",color:""};C.title=aW[e].headline,C.uniqueid=VMM.Util.unique_ID(4),C.color=aW[e].color,C.content=VMM.appendAndGetElement(aH,"<div>","era"),VMM.Element.attr(C.content,"id",C.uniqueid),VMM.Element.css(C.content,"background",C.color),VMM.appendElement(C.content,"<h3>"+VMM.Util.unlinkify(C.title)+"</h3>"),C.startdate=VMM.Util.parseDate(aW[e].startDate),C.enddate=VMM.Util.parseDate(aW[e].endDate),aV.push(C)}ag()},ah=function(r,q,p){var o=r.type,n=r.multiplier,m=af(q),l=af(p),k=q.months,j=p.months;return o=="millenium"?(k=q.milleniums,j=p.milleniums):o=="century"?(k=m.centuries,j=l.centuries):o=="decade"?(k=m.decades,j=l.decades):o=="year"?(k=m.years,j=l.years):o=="month"?(k=m.months,j=l.months):o=="week"?(k=m.weeks,j=l.weeks):o=="day"?(k=m.days,j=l.days):o=="hour"?(k=m.hours,j=l.hours):o=="minute"&&(k=m.minutes,j=l.minutes),_pos=(k-aN.base)*(aK.interval_width/aK.multiplier),_pos_end=(j-aN.base)*(aK.interval_width/aK.multiplier),pos={begin:_pos,end:_pos_end}},ag=function(S){var R=aN.type,Q=aN.multiplier,P=2,O=0,N=0,M=150,L=6,K=0;VMM.Element.removeClass(".flag","row1"),VMM.Element.removeClass(".flag","row2"),VMM.Element.removeClass(".flag","row3");for(var J=0;J<aU.length;J++){var I,G=aU[J].marker,D=aU[J].flag,r=aU[J].lineevent,o=ah(aN,aX[J].startdate,aX[J].enddate);H=o.begin,_pos_end=o.end;var k=-2;H=Math.round(H+k),_pos_end=Math.round(_pos_end+k),I=Math.round(_pos_end-H),S?(VMM.Element.stop(G),VMM.Element.animate(G,aK.duration/2,aK.ease,{left:H})):VMM.Element.css(G,"left",H),J==aR&&(K=H),I>5&&(VMM.Element.css(r,"height",L),VMM.Element.css(r,"width",I),VMM.Element.css(r,"top",M)),H-O<aK.marker_width+aK.spacing?P<aK.rows.length-1?P++:(P=0,N++):(N=0,P=0),O=H,S?(VMM.Element.stop(D),VMM.Element.animate(D,aK.duration,aK.ease,{top:aK.rows[P]})):VMM.Element.css(D,"top",aK.rows[P]),aK.has_start_page&&aU[J].type=="start"&&VMM.Element.visible(G,!1)}for(var h=0;h<aV.length;h++){var I,g=aV[h],e=g.content,H=ah(aN,g.startdate,g.enddate),F=H.end-H.begin,E=25;VMM.Element.css(e,"left",H.begin),VMM.Element.css(e,"width",F)}S&&(VMM.Element.stop(aI),VMM.Element.animate(aI,aK.duration/2,aK.ease,{left:aK.width/2-K}))},af=function(e,d){var f={};return f.days=e/aO.day,f.weeks=f.days/aO.week,f.months=f.days/aO.month,f.years=f.months/aO.year,f.hours=f.days*aO.hour,f.minutes=f.days*aO.minute,f.seconds=f.days*aO.second,f.decades=f.years/aO.decade,f.centuries=f.years/aO.century,f.milleniums=f.years/aO.millenium,f},ae=function(){var d=af(aX[0].startdate),c=af(aX[aX.length-1].enddate);aL.millenium.type="millenium",aL.millenium.first=d.milleniums,aL.millenium.base=Math.floor(d.milleniums),aL.millenium.last=c.milleniums,aL.millenium.number=aS.milleniums,aL.millenium.multiplier=aP.millenium,aL.millenium.minor=aP.millenium,aL.century.type="century",aL.century.first=d.centuries,aL.century.base=Math.floor(d.centuries),aL.century.last=c.centuries,aL.century.number=aS.centuries,aL.century.multiplier=aP.century,aL.century.minor=aP.century,aL.decade.type="decade",aL.decade.first=d.decades,aL.decade.base=Math.floor(d.decades),aL.decade.last=c.decades,aL.decade.number=aS.decades,aL.decade.multiplier=aP.decade,aL.decade.minor=aP.decade,aL.year.type="year",aL.year.first=d.years,aL.year.base=Math.floor(d.years),aL.year.last=c.years,aL.year.number=aS.years,aL.year.multiplier=1,aL.year.minor=aP.month,aL.month.type="month",aL.month.first=d.months,aL.month.base=Math.floor(d.months),aL.month.last=c.months,aL.month.number=aS.months,aL.month.multiplier=1,aL.month.minor=Math.round(aP.week),aL.week.type="week",aL.week.first=d.weeks,aL.week.base=Math.floor(d.weeks),aL.week.last=c.weeks,aL.week.number=aS.weeks,aL.week.multiplier=1,aL.week.minor=7,aL.day.type="day",aL.day.first=d.days,aL.day.base=Math.floor(d.days),aL.day.last=c.days,aL.day.number=aS.days,aL.day.multiplier=1,aL.day.minor=24,aL.hour.type="hour",aL.hour.first=d.hours,aL.hour.base=Math.floor(d.hours),aL.hour.last=c.hours,aL.hour.number=aS.hours,aL.hour.multiplier=1,aL.hour.minor=60,aL.minute.type="minute",aL.minute.first=d.minutes,aL.minute.base=Math.floor(d.minutes),aL.minute.last=c.minutes,aL.minute.number=aS.minutes,aL.minute.multiplier=1,aL.minute.minor=60,aL.second.type="decade",aL.second.first=d.seconds,aL.second.base=Math.floor(d.seconds),aL.second.last=c.seconds,aL.second.number=aS.seconds,aL.second.multiplier=1,aL.second.minor=10},ad=function(){VMM.attachElement(aE,""),VMM.attachElement(aD,""),aN.date=new Date(aX[0].startdate.getFullYear(),0,1,0,0,0),aM.date=new Date(aX[0].startdate.getFullYear(),0,1,0,0,0);var y=0,x=0,w=!0,v=0,u=0,s=0;for(var r=0;r<aN.number+1;r++){var q;aN.type=="century"?(w&&aN.date.setFullYear(Math.floor(aX[0].startdate.getFullYear()/100)*100),aN.date.setFullYear(aN.date.getFullYear()+y*100),q=Math.floor(aN.date.getFullYear()/100)*100):aN.type=="decade"?(w&&aN.date.setFullYear(Math.floor(aX[0].startdate.getFullYear()/10)*10),aN.date.setFullYear(aN.date.getFullYear()+y*10),q=Math.floor(aN.date.getFullYear()/10)*10):aN.type=="year"?(!w,aN.date.setFullYear(aN.date.getFullYear()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)):aN.type=="month"?(w&&aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setMonth(aN.date.getMonth()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)):aN.type=="week"?(w&&(aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setDate(Math.floor(aX[0].startdate.getDate()*7))),aN.date.setDate(aN.date.getDate()+y*7),q=VMM.Util.date.day_abbr[aN.date.getDay()]+" "+VMM.Util.date.month_abbr[aN.date.getMonth()]+" "+aN.date.getDate()):aN.type=="day"?(w&&(aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setDate(aX[0].startdate.getDate())),aN.date.setDate(aN.date.getDate()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)):aN.type=="hour"?(w&&(aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setDate(aX[0].startdate.getDate()),aN.date.setHours(aX[0].startdate.getHours())),aN.date.setHours(aN.date.getHours()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)):aN.type=="minute"?(w&&(aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setDate(aX[0].startdate.getDate()),aN.date.setHours(aX[0].startdate.getHours()),aN.date.setMinutes(aX[0].startdate.getMinutes())),aN.date.setMinutes(aN.date.getMinutes()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)):aN.type=="second"&&(w&&(aN.date.setMonth(aX[0].startdate.getMonth()),aN.date.setDate(aX[0].startdate.getDate()),aN.date.setHours(aX[0].startdate.getHours()),aN.date.setMinutes(aX[0].startdate.getMinutes()),aN.date.setSeconds(aX[0].startdate.getSeconds())),aN.date.setSeconds(aN.date.getSeconds()+y),q=VMM.Util.date.prettyDate(aN.date,!0,aN.type)),y=1,w&&(v=o),w=!1;var p=ah(aN,aN.date,aN.date),o=p.begin;$interval_date=VMM.appendAndGetElement(aE,"<div>","_idd"),VMM.appendElement($interval_date,q),VMM.Element.css($interval_date,"left",o),VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/2)),o-u<65?o-u<35?r%4==0?o==0?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display","none"):VMM.Util.isEven(r)?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display",""),u=o}w=!0,_major_first_pos=0,_major_last_pos=0;for(var r=0;r<Math.ceil(aM.number)+1;r++){var q;aM.type=="century"?(w&&aM.date.setFullYear(Math.floor(aX[0].startdate.getFullYear()/100)*100),aM.date.setFullYear(aM.date.getFullYear()+x*100),q=Math.floor(aM.date.getFullYear()/100)*100):aM.type=="decade"?(w&&aM.date.setFullYear(Math.floor(aX[0].startdate.getFullYear()/10)*10),aM.date.setFullYear(aM.date.getFullYear()+x*10),q=Math.floor(aM.date.getFullYear()/10)*10):aM.type=="year"?(!w,aM.date.setFullYear(aM.date.getFullYear()+x),q=aM.date.getFullYear()):aM.type=="month"?(w&&aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setMonth(aM.date.getMonth()+x),q=VMM.Util.date.month[aM.date.getMonth()]+" "+aM.date.getFullYear()):aM.type=="week"?(w&&(aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setDate(Math.floor(aX[0].startdate.getDate()*7))),aM.date.setDate(aM.date.getDate()+x*7),q=VMM.Util.date.day_abbr[aM.date.getDay()]+" "+VMM.Util.date.month_abbr[aM.date.getMonth()]+" "+aM.date.getDate()):aM.type=="day"?(w&&(aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setDate(aX[0].startdate.getDate())),aM.date.setDate(aM.date.getDate()+x),q=VMM.Util.date.prettyDate(aM.date,!0,aM.type)):aM.type=="hour"?(w&&(aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setDate(aX[0].startdate.getDate()),aM.date.setHours(aX[0].startdate.getHours())),aM.date.setHours(aM.date.getHours()+x),q=VMM.Util.date.prettyDate(aM.date,!0,aM.type)):aM.type=="minute"?(w&&(aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setDate(aX[0].startdate.getDate()),aM.date.setHours(aX[0].startdate.getHours()),aM.date.setMinutes(aX[0].startdate.getMinutes())),aM.date.setMinutes(aM.date.getMinutes()+x),q=VMM.Util.date.prettyDate(aM.date,!0,aM.type)):aM.type=="second"&&(w&&(aM.date.setMonth(aX[0].startdate.getMonth()),aM.date.setDate(aX[0].startdate.getDate()),aM.date.setHours(aX[0].startdate.getHours()),aM.date.setMinutes(aX[0].startdate.getMinutes()),aM.date.setSeconds(aX[0].startdate.getSeconds())),aM.date.setSeconds(aM.date.getSeconds()+x),q=VMM.Util.date.prettyDate(aM.date,!0,aM.type)),trace("interval_major.type "+aM.type),x=1;var p=ah(aN,aM.date,aM.date),o=p.begin;$interval_date=VMM.appendAndGetElement(aD,"<div>","major"),VMM.appendElement($interval_date,q),VMM.Element.css($interval_date,"left",o),VMM.Element.css($interval_date,"left",o),VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/2)),w&&(_major_first_pos=o),w=!1,s=o,_major_last_pos=o}VMM.Element.width(aH,aN.number*(aK.interval_width/aK.multiplier)),_minor_pos_offset=50;var n=_major_last_pos-_major_first_pos+_minor_pos_offset*6,e=u+_minor_pos_offset*6;n<e?VMM.Element.width(ay,e):VMM.Element.width(ay,n),VMM.Element.css(ay,"left",_major_first_pos-_minor_pos_offset),aK.timeline_width=VMM.Element.width(aE)},ac=function(){aS=af(aX[aX.length-1].enddate-aX[0].startdate,!0),ae(),aS.milleniums>aX.length/aK.density?aN=aL.millenium:aS.centuries>aX.length/aK.density?aN=Math.ceil(aL.century):aS.decades>aX.length/aK.density?aN=aL.decade:aS.years>aX.length/aK.density?aN=aL.year:aS.months>aX.length/aK.density?aN=aL.month:aS.days>aX.length/aK.density?aN=aL.day:aS.hours>aX.length/aK.density?aN=aL.hour:aS.minutes>aX.length/aK.density?aN=aL.minute:aS.seconds>aX.length/aK.density?aN=aL.second:(trace("NO FUCKING IDEA WHAT THE TYPE SHOULD BE"),aN.type="unknown"),aS.milleniums>=1?aM=aL.millenium:aS.centuries>=1?aM=aL.century:aS.decades>=1?aM=aL.decade:aS.years>=1?aM=aL.year:aS.months>1?aM=aL.month:aS.weeks>1?aM=aL.month:aS.days>1?aM=aL.day:aS.hours>1?aM=aL.hour:aS.minutes>1?aM=aL.minute:aS.seconds>1?aM=aL.minute:(trace("NO FUCKING IDEA WHAT THE TYPE SHOULD BE"),aM.type="unknown"),ay=VMM.appendAndGetElement(aF,"<div>","minor"),ad()},ab=function(w,v,u,s,r){aR=w;var q=aK.ease,p=aK.duration,o=!1,n=!1;aR==0&&(n=!0),aR+1==aU.length&&(o=!0),v!=null&&v!=""&&(q=v),u!=null&&u!=""&&(p=u);var k=VMM.Element.position(aU[aR].marker);for(var h=0;h<aU.length;h++){VMM.Element.removeClass(aU[h].marker,"active")}aK.has_start_page&&aU[aR].type=="start"&&(VMM.Element.visible(aU[aR].marker,!1),VMM.Element.addClass(aU[aR].marker,"start")),VMM.Element.addClass(aU[aR].marker,"active"),!n,!o,VMM.Element.stop(aI),VMM.Element.animate(aI,p,q,{left:aK.width/2-k.left})},aa=function(){VMM.attachElement(at,""),aI=VMM.appendAndGetElement(at,"<div>","timenav"),aH=VMM.appendAndGetElement(aI,"<div>","content"),aG=VMM.appendAndGetElement(aI,"<div>","time"),aF=VMM.appendAndGetElement(aG,"<div>","time-interval-minor"),aD=VMM.appendAndGetElement(aG,"<div>","time-interval-major"),aE=VMM.appendAndGetElement(aG,"<div>","time-interval"),aC=VMM.appendAndGetElement(at,"<div>","timenav-background"),az=VMM.appendAndGetElement(aC,"<div>","timenav-line"),aA=VMM.appendAndGetElement(aC,"<div>","timenav-interval-background","<div class='top-highlight'></div>"),ac(),ai(),aq(!0),VMM.fireEvent(at,"LOADED"),ax=VMM.appendAndGetElement(at,"<div>","toolbar"),aK.has_start_page&&($backhome=VMM.appendAndGetElement(ax,"<div>","back-home","<div class='icon'></div>"),VMM.bindEvent(".back-home",am,"click"),VMM.Element.css(ax,"top",27)),aw=VMM.appendAndGetElement(ax,"<div>","zoom-in","<div class='icon'></div>"),av=VMM.appendAndGetElement(ax,"<div>","zoom-out","<div class='icon'></div>"),VMM.Element.attribute($backhome,"title","Return to Title"),VMM.Element.attribute($backhome,"rel","tooltip"),VMM.Element.attribute(aw,"title","Expand Timeline"),VMM.Element.attribute(aw,"rel","tooltip"),VMM.Element.attribute(av,"title","Contract Timeline"),VMM.Element.attribute(av,"rel","tooltip"),VMM.bindEvent(".zoom-in",ao,"click"),VMM.bindEvent(".zoom-out",an,"click"),ax.tooltip({selector:"div[rel=tooltip]",placement:"right"}),VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet"?(VMM.TouchSlider.createPanel(aC,aI,aK.width,aK.spacing,!1),VMM.bindEvent(aI,aj,"TOUCHUPDATE")):VMM.DragSlider.createPanel(at,aI,aK.width,aK.spacing,!1),aQ=!0},aB=function(){ad(),ag(!0)}},VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(b){data=VMM.Timeline.DataObj.data_obj,type.of(b)!="string"?(trace("DATA SOURCE: NOT JSON"),trace("TRYING HTML PARSE"),VMM.Timeline.DataObj.parseHTML(b)):b.match("%23")?(trace("DATA SOURCE: TWITTER SEARCH"),VMM.Timeline.DataObj.model_Tweets.getData("%23medill")):b.match("spreadsheet")?(trace("DATA SOURCE: GOOGLE SPREADSHEET"),VMM.Timeline.DataObj.model_GoogleSpreadsheet.getData(b)):(trace("DATA SOURCE: JSON"),VMM.getJSON(b,VMM.Timeline.DataObj.parseJSON))},parseHTML:function(e){trace("parseHTML");var d=VMM.Timeline.DataObj.data_template_obj;if(VMM.Element.find("#timeline section","time")[0]){d.timeline.startDate=VMM.Element.html(VMM.Element.find("#timeline section","time")[0]),d.timeline.headline=VMM.Element.html(VMM.Element.find("#timeline section","h2")),d.timeline.text=VMM.Element.html(VMM.Element.find("#timeline section","article"));var f=!1;VMM.Element.find("#timeline section","figure img").length!=0?(f=!0,d.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure img"),"src")):VMM.Element.find("#timeline section","figure a").length!=0&&(f=!0,d.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure a"),"href")),f&&(VMM.Element.find("#timeline section","cite").length!=0&&(d.timeline.asset.credit=VMM.Element.html(VMM.Element.find("#timeline section","cite"))),VMM.Element.find(this,"figcaption").length!=0&&(d.timeline.asset.caption=VMM.Element.html(VMM.Element.find("#timeline section","figcaption"))))}VMM.Element.each("#timeline li",function(b,j){var i=!1,h={type:"default",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(VMM.Element.find(this,"time")!=0){i=!0,h.startDate=VMM.Element.html(VMM.Element.find(this,"time")[0]),VMM.Element.find(this,"time")[1]&&(h.endDate=VMM.Element.html(VMM.Element.find(this,"time")[0])),h.headline=VMM.Element.html(VMM.Element.find(this,"h3")),h.text=VMM.Element.html(VMM.Element.find(this,"article"));var g=!1;VMM.Element.find(this,"figure img").length!=0?(g=!0,h.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure img"),"src")):VMM.Element.find(this,"figure a").length!=0&&(g=!0,h.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure a"),"href")),g&&(VMM.Element.find(this,"cite").length!=0&&(h.asset.credit=VMM.Element.html(VMM.Element.find(this,"cite"))),VMM.Element.find(this,"figcaption").length!=0&&(h.asset.caption=VMM.Element.html(VMM.Element.find(this,"figcaption")))),trace(h),d.timeline.date.push(h)}}),VMM.fireEvent(global,"DATAREADY",d)},parseJSON:function(b){b.timeline.type=="default"?(trace("DATA SOURCE: JSON STANDARD TIMELINE"),VMM.fireEvent(global,"DATAREADY",b)):b.timeline.type=="twitter"?(trace("DATA SOURCE: JSON TWEETS"),VMM.Timeline.DataObj.model_Tweets.buildData(b)):(trace("DATA SOURCE: NO IDEA"),trace(type.of(b.timeline)))},model_Tweets:{type:"twitter",buildData:function(b){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED"),VMM.ExternalAPI.twitter.getTweets(b.timeline.tweets)},getData:function(b){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED"),VMM.ExternalAPI.twitter.getTweetSearch(b)},onTwitterDataReady:function(g,f){var j=VMM.Timeline.DataObj.data_template_obj;for(var i=0;i<f.tweetdata.length;i++){var h={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};h.startDate=f.tweetdata[i].raw.created_at,type.of(f.tweetdata[i].raw.from_user_name)?h.headline=f.tweetdata[i].raw.from_user_name+" (<a href='https://twitter.com/"+f.tweetdata[i].raw.from_user+"'>@"+f.tweetdata[i].raw.from_user+"</a>)":h.headline=f.tweetdata[i].raw.user.name+" (<a href='https://twitter.com/"+f.tweetdata[i].raw.user.screen_name+"'>@"+f.tweetdata[i].raw.user.screen_name+"</a>)",h.asset.media=f.tweetdata[i].content,j.timeline.date.push(h)}VMM.fireEvent(global,"DATAREADY",j)}},model_GoogleSpreadsheet:{type:"google spreadsheet",getData:function(e){var d=VMM.Util.getUrlVars(e).key,f="https://spreadsheets.google.com/feeds/list/"+d+"/od6/public/values?alt=json";VMM.getJSON(f,VMM.Timeline.DataObj.model_GoogleSpreadsheet.buildData)},buildData:function(g){var f=VMM.Timeline.DataObj.data_template_obj;for(var j=0;j<g.feed.entry.length;j++){var i=g.feed.entry[j];if(i.gsx$titleslide.$t.match("start")){f.timeline.startDate=i.gsx$startdate.$t,f.timeline.headline=i.gsx$headline.$t,f.timeline.asset.media=i.gsx$media.$t,f.timeline.asset.caption=i.gsx$mediacaption.$t,f.timeline.asset.credit=i.gsx$mediacredit.$t,f.timeline.text=i.gsx$text.$t,f.timeline.type="google spreadsheet"}else{var h={type:"google spreadsheet",startDate:"",endDate:"",headline:"",text:"",type:"google spreadsheet",asset:{media:"",credit:"",caption:""},tags:"Optional"};h.endDate=i.gsx$enddate.$t,h.startDate=i.gsx$startdate.$t,h.headline=i.gsx$headline.$t,h.asset.media=i.gsx$media.$t,h.asset.caption=i.gsx$mediacaption.$t,h.asset.credit=i.gsx$mediacredit.$t,h.text=i.gsx$text.$t,f.timeline.date.push(h)}}VMM.fireEvent(global,"DATAREADY",f)}},data_template_obj:{timeline:{headline:"",description:"",asset:{media:"",credit:"",caption:""},date:[]}},date_obj:{startDate:"2012,2,2,11,30",headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",credit:"",caption:""},tags:"Optional"}});$(document).ready(function(){var a=new VMM.Timeline();a.init("http://www.travisberry.com/timeline.json")});JQTWEET={user:"travisberry",numTweets:1,appendTo:"#tweet",loadTweets:function(){$.ajax({url:"http://api.twitter.com/1/statuses/user_timeline.json/",type:"GET",dataType:"jsonp",data:{screen_name:JQTWEET.user,include_rts:true,count:JQTWEET.numTweets,include_entities:true},success:function(c,e,d){var b='<div class="tweet">TWEET_TEXT<div class="time">AGO</div>';$("#tweet-box").append("<div class='vcard author'><a class='screen-name url' href='https://twitter.com/#!/travisberry' data-screen-name='travisberry'><span class='avatar'><img src='https://si0.twimg.com/profile_images/1359025453/selfPicCrop_normal.png' alt=''></span><span class='fn'>Travis Berry</span><span class='nickname'>@travisberry</span></a></div>");for(var a=0;a<c.length;a++){$(JQTWEET.appendTo).append(b.replace("TWEET_TEXT",JQTWEET.ify.clean(c[a].text)).replace(/USER/g,c[a].user.screen_name).replace("AGO",JQTWEET.timeAgo(c[a].created_at)).replace(/ID/g,c[a].id_str))}}})},timeAgo:function(g){var i=new Date();var e=new Date(g);if($.browser.msie){e=Date.parse(g.replace(/( \+)/," UTC$1"))}var h=i-e;var b=1000,c=b*60,d=c*60,f=d*24,a=f*7;if(isNaN(h)||h<0){return""}if(h<b*2){return"right now"}if(h<c){return Math.floor(h/b)+" seconds ago"}if(h<c*2){return"about 1 minute ago"}if(h<d){return Math.floor(h/c)+" minutes ago"}if(h<d*2){return"about 1 hour ago"}if(h<f){return Math.floor(h/d)+" hours ago"}if(h>f&&h<f*2){return"yesterday"}if(h<f*365){return Math.floor(h/f)+" days ago"}else{return"over a year ago"}},ify:{link:function(a){return a.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(g,f,d,c,b){var e=d.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+e+f+'">'+((f.length>25)?f.substr(0,24)+"...":f)+"</a>"+b})},at:function(a){return a.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g,function(b,c){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+c+'">@'+c+"</a>"})},list:function(a){return a.replace(/\B[@＠]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(b,c){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+c+'">@'+c+"</a>"})},hash:function(a){return a.replace(/(^|\s+)#(\w+)/gi,function(b,c,d){return c+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+d+'">#'+d+"</a>"})},clean:function(a){return this.hash(this.at(this.list(this.link(a))))}}};$(document).ready(function(){JQTWEET.loadTweets()});