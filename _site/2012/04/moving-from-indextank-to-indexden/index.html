<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Moving From IndexTank To IndexDen | Travis Berry</title>
		<meta name="author" content="Travis Berry">
		<!-- Mobile viewport optimized: j.mp/bplateviewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" type="image/x-icon" href="http://www.travisberry.com/favicon.ico">
		<link href="http://static-assets1.travisberry.com/apple-touch/57.png" rel="apple-touch-icon" sizes="57x57" type="image/png" />
		<link href="http://static-assets1.travisberry.com/apple-touch/72.png" rel="apple-touch-icon" sizes="72x72" type="image/png" />
		<link href="http://static-assets1.travisberry.com/apple-touch/114.png" rel="apple-touch-icon" sizes="114x114" type="image/png" />
		
		<link rel="alternate" type="application/atom+xml" href="http://www.travisberry.com/atom.xml" />
		<link href="http://static-assets.travisberry.com/assets/application.css.gz" media="screen" rel="stylesheet" type="text/css" />
		<link rel="canonical" href="http://www.travisberry.com/2012/04/moving-from-indextank-to-indexden/" />
		<!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
		<![endif]-->
		<!--[if lte IE 7]>
			<link href="http://static.travisberry.com/sites/4ddebc054a2ab10001000007/theme/stylesheets/ie.css" media="screen" rel="stylesheet" type="text/css" />
			<script type="text/javascript" src="http://static-assets.travisberry.com/js/unitpngfix.js"></script>
		<![endif]-->
	</head>
	<body>
		<div id="topBar">
			
				<a href="http://www.travisberry.com/2012/04/moving-from-indextank-to-indexden"><img src="http://static-assets.travisberry.com/thumbnails/indexden_thumb.jpg" alt="Moving From IndexTank To IndexDen" title="Moving From IndexTank To IndexDen" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2012/04/real-time-in-place-editing-for-rails"><img src="http://static-assets3.travisberry.com/thumbnails/juggernaut_thumb.jpg" alt="Real-Time In Place Editing For Rails" title="Real-Time In Place Editing For Rails" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2012/02/hubot-deploy"><img src="http://static-assets3.travisberry.com/thumbnails/hubot-capistrano_thumb.jpg" alt="Hubot Deploy" title="Hubot Deploy" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/12/so-long-and-thanks-for-the-elephant"><img src="http://static-assets2.travisberry.com/thumbnails/elephant_thumb.jpg" alt="So Long And Thanks For The Elephant" title="So Long And Thanks For The Elephant" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/09/hospitium-new-open-source-project"><img src="http://static-assets1.travisberry.com/thumbnails/hospitium_thumb.jpg" alt="Hospitium - New Open Source Project" title="Hospitium - New Open Source Project" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/09/goodbye-wordpress-hello-jekyll"><img src="http://static-assets.travisberry.com/thumbnails/jekyll_thumb.jpg" alt="Goodbye WordPress - Hello Jekyll" title="Goodbye WordPress - Hello Jekyll" width=20 height=20 /></a>
			
			<noscript style="font-size:12px;vertical-align:middle;">
				For full functionality of this site it is necessary to enable JavaScript.
				Here are the <a href="http://www.enable-javascript.com/" target="_blank">
				instructions how to enable JavaScript in your web browser</a>.
				<style>
					pre{
					  text-shadow: none !important;
					  font-size:14px;
					  background-color: #111111;
					  color: #CAF715;
						padding:10px;
						margin-bottom:20px;
						overflow:auto;
					}
				</style>
			</noscript>
		</div>
		<div id="wrapper" class="container_12">
			<div id="content">
				<nav>
					<ul id="menu" class="clearfix">
						<li class="link on first last" id="home-link"><a href="/"><span></span>Home</a></li>
						<li class="link on first last" id="blog-link"><a href="/blog/"><span></span>Blog</a></li>
						<li class="link on first last" id="work-link"><a href="/work/"><span></span>Work</a></li>
						<li class="link on first last" id="contact-link"><a href="/contact/"><span></span>Contact</a></li>
					</ul>
					<br class="clear" />
				</nav>
				<div id="post">
<p><article class="post clearfix">
  <h3>Moving From IndexTank To IndexDen</h3>
  <a href="http://s0.geograph.org.uk/geophotos/02/41/96/2419659_06c1d213.jpg" class="postImageLink"><img src="http://static-assets.travisberry.com/post_images/indexden.jpg" alt="" class="thumbnail alignleft" width=640  /></a>
  <h6>Published: April 08, 2012</h6></p>

<p>A while back I did a post on <a href="http://www.travisberry.com/2011/02/fast-cakephp-search-with-indextank/">using IndexTank with CakePHP</a>. Since then IndexTank has been bought by LinkedIn and will be <a href="https://indextank.com/documentation/faq2">shutdown</a>.</p>

<p>Luckily there is a drop in replacement in the form of <a href="http://indexden.com/">IndexDen</a>. I was able to get <a href="http://homkora.com">Homkora</a> switched over in about 30 minutes.</p>

<p>First signup for an account with IndexDen. Then create the indexes that you need. I recommend calling them whatever you called them in IndexTank, that way there is no need to change the code.</p>

<p>From the example in the original post</p>

<div class="gistFallback">
<script src='https://gist.github.com/1177288.js?file=example1.php'></script><noscript><pre><code>&lt;?php
function createIndextankClient(){
    App::import('Vendor', 'indextank_client');
    $API_URL = 'YOUR API URL HERE';
    $client = new ApiClient($API_URL);
    return $client;
}
   
function addIndextank($indexType,$id,$data){
    //send project to indextank
    $client = $this-&gt;createIndextankClient();
    $index = $client-&gt;get_index($indexType);
    $doc_id = $id;
    $index-&gt;add_document($doc_id, $data);
}
   
function deleteIndextank($indexType,$id){
    //delete indextank document
    $client = $this-&gt;createIndextankClient();
    $index = $client-&gt;get_index($indexType);
    $index-&gt;delete_document($id);
}
   
function searchIndextank($indexType,$query){
    //search indextank
    $client = $this-&gt;createIndextankClient();
    $index = $client-&gt;get_index($indexType);
    $index-&gt;add_function(2, &quot;relevance&quot;);
    $res = $index-&gt;search($query);
    return $res;
}
?&gt;</code></pre></noscript>
</div>


<p>All you have to change is <code>$API_URL = 'YOUR API URL HERE';</code> from the IndexTank URL to the IndexDen one.</p>

<p>That is technically all you need to do to start using IndexDen instead of IndexTank. However, you will notice that none of you records are in the new index.</p>

<p>A quick way to add them back in is with a simple loop. Staying with the last posts example, here is how I added the projects from Homkora.</p>

<div class="gistFallback">
<script src='https://gist.github.com/2339198.js?file=projects_controller.php'></script><noscript><pre><code>&lt;?php

function add_to_index() {

    $projects = $this-&gt;Project-&gt;find('all');

    foreach($projects as $project){
        $indexData = array('text'=&gt;$project['Project']['title'],'title'=&gt;$project['Project']['title'],'description'=&gt;$project['Project']['description'],'user_id'=&gt;$project['Project']['user_id']);
        $id = $project['Project']['_id'];
        $this-&gt;addIndextank(&quot;HomkoraProjects&quot;,$id,$indexData);
    }
}

?&gt;</code></pre></noscript>
</div>


<p>I just added in this simple function, hit the URL once, then removed it. All the old records are in, and any new records will be added thanks to the code from the first post.</p>

<p>So if you need a quick fix for IndexTanks closure, give IndexDen a shot. I've been in contact with the CEO of the company and he seems like a really nice guy so if you have a more complex setup, contact them and I bet they can help you out.</p>

<p><strong>Edit:</strong> Other services offering drop in replacements.</p>

<ul>
<li><a href="http://www.searchify.com/">http://www.searchify.com/</a></li>
</ul>


<p></article></p>

</div>
<p><a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a></p>
<div id="related">
  <h2>Probably Not Related Posts</h2>
  <ul class="posts">
    
      <li><span>07 Apr 2012</span> &raquo; <a href="/2012/04/real-time-in-place-editing-for-rails">Real-Time In Place Editing For Rails</a></li>
    
      <li><span>16 Feb 2012</span> &raquo; <a href="/2012/02/hubot-deploy">Hubot Deploy</a></li>
    
      <li><span>24 Dec 2011</span> &raquo; <a href="/2011/12/so-long-and-thanks-for-the-elephant">So Long And Thanks For The Elephant</a></li>
    
  </ul>
</div>
			</div> <!-- end content -->
			<div class="clear"></div>
			<footer id="footer" class="grid_12">
				<h1><a href="/">Travis Berry</a></h1>
			</footer> <!-- end footer -->
			<div class="clear"></div>
		</div> <!-- end wrapper -->
		<a href="#top" id="top-link">&and;</a>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
		<script src="http://static-assets.travisberry.com/assets/application.js.gz"></script>
		<script>
			(function() {
				var hn = document.createElement('script'); hn.type = 'text/javascript';
				hn.async = true; hn.src = 'http://hnbutton.appspot.com/static/hn.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(hn, s);
			})();
		</script>
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-11593601-1']);
		  _gaq.push(['_trackPageview']);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
	</body>
</html>