<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>On HTML5 Video | Travis Berry</title>
		<meta name="author" content="Travis Berry">
		<!-- Mobile viewport optimized: j.mp/bplateviewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" type="image/x-icon" href="http://www.travisberry.com/favicon.ico">
		<link rel="alternate" type="application/atom+xml" href="http://www.travisberry.com/atom.xml" />
		<link href="http://www.travisberry.com/css/style.min.css" media="screen" rel="stylesheet" type="text/css" />
		<link rel="canonical" href="http://www.travisberry.com/2010/02/on-html5-video/" />
		<!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
		<![endif]-->
		<!--[if lte IE 7]>
			<link href="http://static.travisberry.com/sites/4ddebc054a2ab10001000007/theme/stylesheets/ie.css" media="screen" rel="stylesheet" type="text/css" />
			<script type="text/javascript" src="http://static-assets.travisberry.com/js/unitpngfix.js"></script>
		<![endif]-->
	</head>
	<body>
		<div id="topBar">
			
				<a href="http://www.travisberry.com/2012/02/hubot-deploy"><img src="http://static-assets3.travisberry.com/thumbnails/hubot-capistrano_thumb.jpg" alt="Hubot Deploy" title="Hubot Deploy" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/12/so-long-and-thanks-for-the-elephant"><img src="http://static-assets2.travisberry.com/thumbnails/elephant_thumb.jpg" alt="So Long And Thanks For The Elephant" title="So Long And Thanks For The Elephant" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/09/hospitium-new-open-source-project"><img src="http://static-assets1.travisberry.com/thumbnails/hospitium_thumb.jpg" alt="Hospitium - New Open Source Project" title="Hospitium - New Open Source Project" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/09/goodbye-wordpress-hello-jekyll"><img src="http://static-assets.travisberry.com/thumbnails/jekyll_thumb.jpg" alt="Goodbye WordPress - Hello Jekyll" title="Goodbye WordPress - Hello Jekyll" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/05/create-github-gist-with-ruby"><img src="http://static-assets.travisberry.com/thumbnails/gists_thumb.jpg" alt="Create GitHub Gist With Ruby" title="Create GitHub Gist With Ruby" width=20 height=20 /></a>
			
				<a href="http://www.travisberry.com/2011/05/write-text-anywhere-with-html5-canvas"><img src="http://static-assets.travisberry.com/thumbnails/canvas_thumb.jpg" alt="Write Text Anywhere With HTML5 Canvas" title="Write Text Anywhere With HTML5 Canvas" width=20 height=20 /></a>
			
			<noscript style="font-size:12px;vertical-align:middle;">
				For full functionality of this site it is necessary to enable JavaScript.
				Here are the <a href="http://www.enable-javascript.com/" target="_blank">
				instructions how to enable JavaScript in your web browser</a>.
				<style>
					pre{
					  text-shadow: none !important;
					  font-size:14px;
					  background-color: #111111;
					  color: #CAF715;
						padding:10px;
						margin-bottom:20px;
						overflow:auto;
					}
				</style>
			</noscript>
		</div>
		<div id="wrapper" class="container_12">
			<div id="content">
				<nav>
					<ul id="menu" class="clearfix">
						<li class="link on first last" id="home-link"><a href="/"><span></span>Home</a></li>
						<li class="link on first last" id="blog-link"><a href="/blog/"><span></span>Blog</a></li>
						<li class="link on first last" id="work-link"><a href="/work/"><span></span>Work</a></li>
						<li class="link on first last" id="contact-link"><a href="/contact/"><span></span>Contact</a></li>
					</ul>
					<br class="clear" />
				</nav>
				<div id="post">
<p><article class="post clearfix">
  <h3>On HTML5 Video</h3>
  <a href="http://commons.wikimedia.org/wiki/File:Train_Wreck_1922.jpg#file" class="postImageLink"><img src="http://oldstatic3.travisberry.com/wp-content/uploads/2010/02/Train_Wreck.jpg" alt="" class="thumbnail alignleft" width=640 height=280 /></a>
  <h6>Published: 2010-02-25</h6></p>

<p>Hey! Have you heard? <a href="http://en.wikipedia.org/wiki/HTML5_video">HTML5 video</a> is going to revolutionize the way we use video on the web. No more dealing with Flash or Quicktime embeds. Video will now be as simple as adding an image. Ummm, no. It's not. It's not even close. That's not to say it's all bad, but boy howdy does it have a long way to go.</p>

<p>Before I get to the bashing let's talk about what is good about HTML5 video.</p>

<p>Well first off, it is in theory as easy as adding an image.</p>

<div class="gistFallback">
<script src='https://gist.github.com/1176926.js?file=example1.html'></script><noscript><pre><code>&lt;video src=&quot;movie.ogg&quot; controls=&quot;controls&quot;&gt;&lt;/video&gt;</code></pre></noscript>
</div>


<p>Holy crap that is simple. Unfortunately your code will not end up looking like that. More on it in a bit.</p>

<p>Another HUGE benefit is not having to use Flash. Anyone who has experience with Flash video knows how horrible it is. The embed codes are a nightmare and of course you're dealing with plugins that the user may or may not have.</p>

<p>All around, HTML5 video should be a big improvement. Only problem is, it could be worse than the methods used today. Here's why.</p>

<p>Codecs, codecs, codecs...</p>

<p>Ugh, this is one of the biggest pains to deal with. Guess what, different browsers use different video codecs for HTML5 video. Firefox uses <a href="http://en.wikipedia.org/wiki/Theora">Ogg Theora</a> and Safari uses <a href="http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC">H.264 MP4</a>. So in order for you to have a video play in multiple browsers <strong>you need to make at least two versions</strong>.</p>

<p>That simple code above now turns into</p>

<div class="gistFallback">
<script src='https://gist.github.com/1176926.js?file=example2.html'></script><noscript><pre><code>&lt;video width=&quot;320&quot; height=&quot;240&quot; controls&gt;
  &lt;source src=&quot;NewOrleans2006.ogv&quot; type='video/ogg; codecs=&quot;theora, vorbis&quot;'&gt;
  &lt;source src=&quot;NewOrleans2006.mp4&quot; type='video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;'&gt;
&lt;/video&gt;</code></pre></noscript>
</div>


<p>Not so simple anymore is it? Not horrible but not the elegant solution we were promised.</p>

<p>This battle of the codecs has got to end. The argument boils down to the fact that H.264 and MP4 are proprietary of the <a href="http://en.wikipedia.org/wiki/Moving_Picture_Experts_Group">MPEG</a> consortium and Ogg Theora are open source.</p>

<p>I get Mozilla's argument that they only support open standards, thus the use of Ogg in FireFox, but there is a giant elephant in the room that nobody is mentioning.</p>

<p>It's that Ogg Theora as a codec is in it's infancy compared to H.264 and really kind of sucks in comparison. You can compare the two on my page, <a href="http://oldstatic.travisberry.com/copyright-and-the-internet/">travisberry.com/copyright-and-the-internet/</a></p>

<p>View it in FireFox and then in Safari. Notice the WAY smoother video in the Safari version. Yeah, me too.</p>

<p>The solution I would really like to see (but I'm not holding my breath) is for MPEG to step up and realize that they have the opportunity to seize the online video market and release H.264 into the open source community. <strong>Drop all the dumb-ass licensing arrangements and give H.264 away.</strong></p>

<p>That is the first main issue with HTML5 video. The other huge issue is legacy browsers. Unless you are using the newest versions of FireFox, Chrome, or Safari, you probably can't see HTML5 video. So this causes us to have to add more code to make sure people can still see our content. This involves some kind of fallback to Flash video. The thing we were trying to avoid in the first place.</p>

<p>I'll write this again for importance. <strong>You still have to include Flash video</strong> if you want your video to play across all browsers. Damn it!</p>

<p>So now that super simple code to embed videos now looks like this to make sure it handles all browsers nicely. Note, this still won't show anything in FireFox 2 but it will show in IE. Most FF users tend to update on a regular basis so it's no huge deal.</p>

<div class="gistFallback">
<script src='https://gist.github.com/1176926.js?file=example3.html'></script><noscript><pre><code>&lt;video width=&quot;640&quot; height=&quot;360&quot; id=&quot;video&quot; poster=&quot;http://www.travisberry.com/html5video/videos/copyright/copyright-poster.jpg&quot; controls=&quot;true&quot;&gt;
    &lt;source src=&quot;http://www.travisberry.com/html5video/videos/copyright/copyright-desktop.mp4&quot; type='video/mp4; codecs=&quot;avc1.64001E, mp4a.40.2&quot;' /&gt;
    &lt;source src=&quot;http://www.travisberry.com/html5video/videos/copyright/copyright-iPhone-cell.3gp&quot; type='video/3gpp; codecs=&quot;mp4v.20.8, samr&quot;' /&gt;
    &lt;source src=&quot;http://www.travisberry.com/html5video/videos/copyright/copyright-desktop3.ogv&quot; type='video/ogg; codecs=&quot;theora, vorbis&quot;' /&gt;
    &lt;object width=&quot;640&quot; height=&quot;385&quot;&gt;
        &lt;param name=&quot;movie&quot; value=&quot;http://www.youtube.com/v/lFeI5SqGYJ8&amp;hl=en_US&amp;fs=1&amp;&quot;&gt;&lt;/param&gt;
        &lt;param name=&quot;allowFullScreen&quot; value=&quot;true&quot;&gt;&lt;/param&gt;
        &lt;param name=&quot;allowscriptaccess&quot; value=&quot;always&quot;&gt;&lt;/param&gt;
        &lt;embed src=&quot;http://www.youtube.com/v/lFeI5SqGYJ8&amp;hl=en_US&amp;fs=1&amp;&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; width=&quot;640&quot; height=&quot;385&quot;&gt;&lt;/embed&gt;
    &lt;/object&gt;
&lt;/video&gt;</code></pre></noscript>
</div>


<p>Notice instead of adding a flash video I added a youtube embed. I was tired of crunching out different codecs by this point so I said screw it and let youtube handle some of the work. (I also added an iPhone version so the code is a little longer than necessary, but not by much)</p>

<p>Ok, so my super simple code has grown kind of large and unwieldy but no biggie, it works so I could live with this.</p>

<p>Time to watch this bad boy in some browsers. Wait, WTF is going on? Why are my videos autobuffering in Chrome and Safari. This is bad. Real bad. What if I have 4 or 5 videos on one page? It's going to buffer all of them at once!?</p>

<p>Yes it will. For reasons unknown, Chrome and Safari have decided to ignore the autobuffer attribute. <strong>They will autobuffer your video come hell or high water.</strong></p>

<p>Again, we can work around this using a javascript method. Daring Fireball has a <a href="http://daringfireball.net/misc/2009/12/user_guide_demos">good example</a> (view source to see how it works). Only problem with it is that in FireFox I was experiencing double audio when using the javascript solution. So that didn't work for me.</p>

<p>The half-assed solution I came up with was to go ahead and let the video autobuffer. I used to have all of my example videos on one page. That was not cool with autobuffering. Now I have a navigation menu linking to each video on it's own page. Now when it autobuffers, it's not such a huge deal. (I figure if they clicked through to the video, at this point they are trying to watch)</p>

<p>So in the end I was able to implement HTML5 video. It isn't pretty and far from perfect but it is possible. For now, I am going to continue to recommend most people go with a Flash video solution. It's just not worth the hassle for the average user. Let's hope the people in charge can save the &lt;video&gt; tag, it could be great, it's just not there yet.</p>

<p>Have you tried to use HTML5 video? Let me know how it went in the comments.</p>

<p><strong>Edit:</strong>After some tweaking of the encode settings, I managed to get a decent output in Ogg. So I recant a bit on it being horrible, but it's still not quite as good as H.264</p>

<p>Here are several other good resources that explore the use of HTML5 video.</p>

<ul>
<li><a href="http://hardwarebug.org/2010/03/03/ogg-objections/">Ogg objections</a></li>
<li><a href="http://hardwarebug.org/2008/11/17/ogg-timestamps-explored/">Ogg timestamps explored</a></li>
<li><a href="http://code.google.com/p/html5media/">HTML5 video for everyone!</a></li>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#video">The video element</a></li>
<li><a href="http://www.niallkennedy.com/blog/2010/02/html5-video-markup.html">HTML5 video markup, compatibility and playback</a></li>
<li><a href="http://diveintohtml5.org/video.html">Video on the Web</a></li>
<li><a href="http://daringfireball.net/2009/12/html5_video_unusable">Why the HTML5 "Video" Element Is Effectively Unusable, Even in Browsers Which Support It</a>
</article></li>
</ul>


</div>
<p>Comments are so 2010. Continue the discussion on twitter. <a href="https://twitter.com/#!/travisberry">@travisberry</a></p>
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>16 Feb 2012</span> &raquo; <a href="/2012/02/hubot-deploy">Hubot Deploy</a></li>
    
      <li><span>24 Dec 2011</span> &raquo; <a href="/2011/12/so-long-and-thanks-for-the-elephant">So Long And Thanks For The Elephant</a></li>
    
      <li><span>05 Sep 2011</span> &raquo; <a href="/2011/09/hospitium-new-open-source-project">Hospitium - New Open Source Project</a></li>
    
  </ul>
</div>
			</div> <!-- end content -->
			<div class="clear"></div>
			<footer id="footer" class="grid_12">
				<h1><a href="/">Travis Berry</a></h1>
			</footer> <!-- end footer -->
			<div class="clear"></div>
		</div> <!-- end wrapper -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
		<script src="http://oldstatic.travisberry.com/search.min.js"></script>
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-11593601-1']);
		  _gaq.push(['_trackPageview']);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
		<!--[if lte IE 7]>
		<script type="text/javascript"> 
			/*Load jQuery if not already loaded*/ if(typeof jQuery == 'undefined'){ document.write("<script type=\"text/javascript\"   src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></"+"script>"); var __noconflict = true; } 
			var IE6UPDATE_OPTIONS = {
				icons_path: "http://static-assets.travisberry.com/ie6update/images/"
			}
		</script>
		<script type="text/javascript" src="http://static-assets.travisberry.com/ie6update/ie6update.js"></script>
		<![endif]-->
	</body>
</html>